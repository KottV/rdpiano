f9dasm: M6800/1/2/3/8/9 / H6309 Binary/OS9/FLEX9 Disassembler V1.83
Loaded binary file ../rd200/RD200_A.bin

;****************************************************
;* Used Labels                                      *
;****************************************************

M0000   EQU     $0000
M0001   EQU     $0001
P1DR    EQU     $0002
P2DR    EQU     $0003
M0005   EQU     $0005
M0008   EQU     $0008
M0009   EQU     $0009
M000B   EQU     $000B
SER_RATE_CNTRL   EQU     $0010
SER_STATUS   EQU     $0011
SER_RECEIVE   EQU     $0012
SER_TRANSMIT   EQU     $0013
M0039   EQU     $0039
M0080   EQU     $0080
M0081   EQU     $0081
M0083   EQU     $0083
MIDIOUT_BUF_WRITE_POS   EQU     $0085
MIDIOUT_BUF_READ_POS   EQU     $0087
M0089   EQU     $0089
M008A   EQU     $008A
M008B   EQU     $008B
M008C   EQU     $008C
M008D   EQU     $008D
MAYBE_MIDI_NOTE_N   EQU     $008E
M008F   EQU     $008F
M0090   EQU     $0090
TEST_MODE_SW   EQU     $0092
M0093   EQU     $0093
M0094   EQU     $0094
M0095   EQU     $0095
M0096   EQU     $0096
M0097   EQU     $0097
IC5_LATCH_STATE   EQU     $0098
M0099   EQU     $0099
M009A   EQU     $009A
M009B   EQU     $009B
M009C   EQU     $009C
M009E   EQU     $009E
M009F   EQU     $009F
M00A0   EQU     $00A0
M00A1   EQU     $00A1
M00A2   EQU     $00A2
M00A3   EQU     $00A3
M00A4   EQU     $00A4
M00A5   EQU     $00A5
M00A6   EQU     $00A6
M00A7   EQU     $00A7
M00A8   EQU     $00A8
SOFT_1   EQU     $00A9
SOFT_2   EQU     $00AA
SOFT_3   EQU     $00AB
M00AC   EQU     $00AC
M00AD   EQU     $00AD
M00AE   EQU     $00AE
M00AF   EQU     $00AF
M00B0   EQU     $00B0
MIDI_SEND_B2   EQU     $00B1
M00B2   EQU     $00B2
ACTIVE_SENS_DATA   EQU     $00B3
SWITCHES_STATE_0   EQU     $00B4
SWITCHES_STATE_1   EQU     $00B5
SWITCHES_STATE_2   EQU     $00B6
SWITCHES_STATE_3   EQU     $00B7
LEDS_STATE_PTR   EQU     $00B8
M00B9   EQU     $00B9
M00BA   EQU     $00BA
LEDS_STATE_PTR_2   EQU     $00BB
SWITCHES_READ_IDX   EQU     $00BC
M00BD   EQU     $00BD
M00BE   EQU     $00BE
M00BF   EQU     $00BF
KEY_MODEL_MODE   EQU     $00C0
FULL_BTN_STATE   EQU     $00C1
M00C2   EQU     $00C2
CURRENT_PGM?   EQU     $00C3
M00C5   EQU     $00C5
LAST_TUNING   EQU     $00CD
M00CE   EQU     $00CE
M00CF   EQU     $00CF
M00D0   EQU     $00D0
M00D1   EQU     $00D1
M00D2   EQU     $00D2
M00D3   EQU     $00D3
M00D4   EQU     $00D4
M00D5   EQU     $00D5
M00D6   EQU     $00D6
M00D7   EQU     $00D7
M00D8   EQU     $00D8
M00D9   EQU     $00D9
M00DA   EQU     $00DA
M00DB   EQU     $00DB
M00DC   EQU     $00DC
M00DD   EQU     $00DD
M00DE   EQU     $00DE
M00DF   EQU     $00DF
M00E0   EQU     $00E0
M00E1   EQU     $00E1
M00E2   EQU     $00E2
M00E3   EQU     $00E3
M00E4   EQU     $00E4
M00E5   EQU     $00E5
M00E6   EQU     $00E6
M00E7   EQU     $00E7
M00E8   EQU     $00E8
M00E9   EQU     $00E9
M00EA   EQU     $00EA
MIDI_SEND_B1   EQU     $00EB
M00EC   EQU     $00EC
M00ED   EQU     $00ED
M00EF   EQU     $00EF
M00F0   EQU     $00F0
M00F1   EQU     $00F1
M050B   EQU     $050B
M0512   EQU     $0512
M0800   EQU     $0800
M0880   EQU     $0880
M0900   EQU     $0900
M0958   EQU     $0958
M097C   EQU     $097C
M097D   EQU     $097D
M097F   EQU     $097F
M0980   EQU     $0980
M0A00   EQU     $0A00
M0A58   EQU     $0A58
M0A80   EQU     $0A80
M0AC0   EQU     $0AC0
M0ADF   EQU     $0ADF
M0B00   EQU     $0B00
M0B40   EQU     $0B40
M0BC0   EQU     $0BC0
M0C40   EQU     $0C40
M0D40   EQU     $0D40
M0E40   EQU     $0E40
M0E41   EQU     $0E41
M0E42   EQU     $0E42
M0E43   EQU     $0E43
M0E44   EQU     $0E44
M0E45   EQU     $0E45
M0E46   EQU     $0E46
M0E47   EQU     $0E47
M0E48   EQU     $0E48
M0E49   EQU     $0E49
M0E4B   EQU     $0E4B
M0E4D   EQU     $0E4D
M0E4F   EQU     $0E4F
M0E51   EQU     $0E51
M0E53   EQU     $0E53
M0E54   EQU     $0E54
M0FFF   EQU     $0FFF
SWITCHES_LATCH   EQU     $1000 ; ic8
LATCH_IC7   EQU     $1800 ; ic7
M1F40   EQU     $1F40
LEDS_LATCH   EQU     $2000 ; ic6
IC5_LATCH   EQU     $2800 ; ic5
VOL_COMP_LATCH   EQU     $3000 ; ic12

;****************************************************
;* Program Code / Data Areas                        *
;****************************************************

        ORG     $E000

        ; Unused?
ME000   FCB     $13                      ;E000: 13             '.'
        LDX     #M050B                   ;E001: CE 05 0B       '...'
        ORAA    M0512                    ;E004: BA 05 12       '...'
        ANDB    #$0A                     ;E007: C4 0A          '..'
        CLI                              ;E009: 0E             '.'
        SUBA    M0ADF                    ;E00A: B0 0A DF       '...'

ZE00C   STX     M0089                    ;E00C: DF 89          '..'
        LDAA    ,X                       ;E00E: A6 00          '..'
        STAA    M0E48                    ;E010: B7 0E 48       '..H'
        LDAA    $01,X                    ;E013: A6 01          '..'
        STAA    M0E46                    ;E015: B7 0E 46       '..F'
        LDAA    $02,X                    ;E018: A6 02          '..'
        STAA    M0E47                    ;E01A: B7 0E 47       '..G'
        LDX     #M0800                   ;E01D: CE 08 00       '...'
        JSR     ZE041                    ;E020: BD E0 41       '..A'
        LDX     M0089                    ;E023: DE 89          '..'
        LDAA    $03,X                    ;E025: A6 03          '..'
        STAA    M0E48                    ;E027: B7 0E 48       '..H'
        LDAA    $04,X                    ;E02A: A6 04          '..'
        STAA    M0E46                    ;E02C: B7 0E 46       '..F'
        LDAA    $05,X                    ;E02F: A6 05          '..'
        STAA    M0E47                    ;E031: B7 0E 47       '..G'
        LDX     #M0880                   ;E034: CE 08 80       '...'
        JSR     ZE041                    ;E037: BD E0 41       '..A'
        CLR     >M0089                   ;E03A: 7F 00 89       '...'
        CLR     >M008A                   ;E03D: 7F 00 8A       '...'
        RTS                              ;E040: 39             '9'

ZE041   STX     M0E4D                    ;E041: FF 0E 4D       '..M'
        LDAA    M0E48                    ;E044: B6 0E 48       '..H'
        CMPA    #$3F                     ;E047: 81 3F          '.?'
        BCS     ZE04D                    ;E049: 25 02          '%.'
        LDAA    #$3F                     ;E04B: 86 3F          '.?'
ZE04D   ORAA    #$C0                     ;E04D: 8A C0          '..'
        STAA    ,X                       ;E04F: A7 00          '..'
        LDAA    M0E47                    ;E051: B6 0E 47       '..G'
        BNE     ZE057                    ;E054: 26 01          '&.'
        INCA                             ;E056: 4C             'L'
ZE057   CLRB                             ;E057: 5F             '_'
        STD     M0E51                    ;E058: FD 0E 51       '..Q'
        LDD     #MFFFF                   ;E05B: CC FF FF       '...'
        STD     M0E49                    ;E05E: FD 0E 49       '..I'
        SUBA    M0E51                    ;E061: B0 0E 51       '..Q'
        STD     M0E4F                    ;E064: FD 0E 4F       '..O'
        LDAA    #$FF                     ;E067: 86 FF          '..'
        LDAB    M0E46                    ;E069: F6 0E 46       '..F'
        ASLD                             ;E06C: 05             '.'
        ASLD                             ;E06D: 05             '.'
        ASLD                             ;E06E: 05             '.'
        ASLD                             ;E06F: 05             '.'
        STD     M0E4B                    ;E070: FD 0E 4B       '..K'
        LDAB    #$7F                     ;E073: C6 7F          '..'
        STAB    M0E53                    ;E075: F7 0E 53       '..S'
ZE078   CLRB                             ;E078: 5F             '_'
        STAB    M0E54                    ;E079: F7 0E 54       '..T'
        LDAB    M0E53                    ;E07C: F6 0E 53       '..S'
ZE07F   LDX     M0E4D                    ;E07F: FE 0E 4D       '..M'
        ABX                              ;E082: 3A             ':'
ZE083   BSR     ZE0D3                    ;E083: 8D 4E          '.N'
        CMPA    M0E53                    ;E085: B1 0E 53       '..S'
        BNE     ZE09D                    ;E088: 26 13          '&.'
        CMPA    M0E51                    ;E08A: B1 0E 51       '..Q'
        BEQ     ZE0D0                    ;E08D: 27 41          ''A'
        LDAA    M0E54                    ;E08F: B6 0E 54       '..T'
        INCA                             ;E092: 4C             'L'
        CMPA    #$40                     ;E093: 81 40          '.@'
        BCS     ZE098                    ;E095: 25 01          '%.'
        DECA                             ;E097: 4A             'J'
ZE098   STAA    M0E54                    ;E098: B7 0E 54       '..T'
        BRA     ZE083                    ;E09B: 20 E6          ' .'
ZE09D   LDAB    M0E54                    ;E09D: F6 0E 54       '..T'
        BNE     ZE0AA                    ;E0A0: 26 08          '&.'
        STAA    ,X                       ;E0A2: A7 00          '..'
        STAA    M0E53                    ;E0A4: B7 0E 53       '..S'
        TAB                              ;E0A7: 16             '.'
        BRA     ZE07F                    ;E0A8: 20 D5          ' .'
ZE0AA   INCA                             ;E0AA: 4C             'L'
        CMPA    M0E53                    ;E0AB: B1 0E 53       '..S'
        BNE     ZE0BA                    ;E0AE: 26 0A          '&.'
        DECA                             ;E0B0: 4A             'J'
        STAA    M0E53                    ;E0B1: B7 0E 53       '..S'
        ORAB    #$C0                     ;E0B4: CA C0          '..'
        STAB    ,X                       ;E0B6: E7 00          '..'
        BRA     ZE078                    ;E0B8: 20 BE          ' .'
ZE0BA   DECA                             ;E0BA: 4A             'J'
        DECB                             ;E0BB: 5A             'Z'
        BNE     ZE0C8                    ;E0BC: 26 0A          '&.'
        LDAB    M0E53                    ;E0BE: F6 0E 53       '..S'
        DECB                             ;E0C1: 5A             'Z'
        STAB    ,X                       ;E0C2: E7 00          '..'
        STAA    $01,X                    ;E0C4: A7 01          '..'
        BRA     ZE078                    ;E0C6: 20 B0          ' .'
ZE0C8   ORAB    #$C0                     ;E0C8: CA C0          '..'
        STAB    ,X                       ;E0CA: E7 00          '..'
        STAA    $01,X                    ;E0CC: A7 01          '..'
        BRA     ZE078                    ;E0CE: 20 A8          ' .'
ZE0D0   STAA    ,X                       ;E0D0: A7 00          '..'
        RTS                              ;E0D2: 39             '9'

ZE0D3   LDD     M0E49                    ;E0D3: FC 0E 49       '..I'
        STD     M0E42                    ;E0D6: FD 0E 42       '..B'
        LDD     M0E4B                    ;E0D9: FC 0E 4B       '..K'
        BSR     ZE0F5                    ;E0DC: 8D 17          '..'
        STD     M0E49                    ;E0DE: FD 0E 49       '..I'
        STD     M0E42                    ;E0E1: FD 0E 42       '..B'
        LDD     M0E4F                    ;E0E4: FC 0E 4F       '..O'
        BSR     ZE0F5                    ;E0E7: 8D 0C          '..'
        ADDD    M0E51                    ;E0E9: F3 0E 51       '..Q'
        LSRA                             ;E0EC: 44             'D'
        BCC     ZE0F4                    ;E0ED: 24 05          '$.'
        INCA                             ;E0EF: 4C             'L'
        TSTA                             ;E0F0: 4D             'M'
        BPL     ZE0F4                    ;E0F1: 2A 01          '*.'
        DECA                             ;E0F3: 4A             'J'
ZE0F4   RTS                              ;E0F4: 39             '9'

ZE0F5   STD     M0E40                    ;E0F5: FD 0E 40       '..@'
        LDAB    M0E43                    ;E0F8: F6 0E 43       '..C'
        MUL                              ;E0FB: 3D             '='
        STD     M0E44                    ;E0FC: FD 0E 44       '..D'
        LDD     M0E41                    ;E0FF: FC 0E 41       '..A'
        MUL                              ;E102: 3D             '='
        ADDD    M0E44                    ;E103: F3 0E 44       '..D'
        STAA    M0E45                    ;E106: B7 0E 45       '..E'
        LDAA    #$00                     ;E109: 86 00          '..'
        ROLA                             ;E10B: 49             'I'
        ASLB                             ;E10C: 58             'X'
        LDAB    #$00                     ;E10D: C6 00          '..'
        ADCB    M0E45                    ;E10F: F9 0E 45       '..E'
        STAB    M0E45                    ;E112: F7 0E 45       '..E'
        ADCA    #$00                     ;E115: 89 00          '..'
        STAA    M0E44                    ;E117: B7 0E 44       '..D'
        LDAA    M0E40                    ;E11A: B6 0E 40       '..@'
        LDAB    M0E42                    ;E11D: F6 0E 42       '..B'
        MUL                              ;E120: 3D             '='
        ADDD    M0E44                    ;E121: F3 0E 44       '..D'
        RTS                              ;E124: 39             '9'

        ; Clear ram?
ZE125   CLRA                             ;E125: 4F             'O'
ZE126   STAA    ,X                       ;E126: A7 00          '..'
        INX                              ;E128: 08             '.'
        DECB                             ;E129: 5A             'Z'
        BNE     ZE126                    ;E12A: 26 FA          '&.'
        RTS                              ;E12C: 39             '9'

hdlr_RST LDS     #M0FFF                   ;E12D: 8E 0F FF       '...'
        CLRA                             ;E130: 4F             'O'
        STAA    M0000                    ;E131: 97 00          '..'
        LDAB    #$FF                     ;E133: C6 FF          '..'
        STAB    M0005                    ;E135: D7 05          '..'
        CLR     >P2DR                    ;E137: 7F 00 03       '...'
        LDAB    #$11                     ;E13A: C6 11          '..'
        STAB    M0001                    ;E13C: D7 01          '..'
        ; Setup serial for MIDI
        LDAB    #$0C                     ;E13E: C6 0C          '..'
        STAB    SER_RATE_CNTRL                    ;E140: D7 10          '..'
        LDAB    #$1A                     ;E142: C6 1A          '..'
        STAB    SER_STATUS                    ;E144: D7 11          '..'
        LDAB    #$0C                     ;E146: C6 0C          '..'
        STAB    M0008                    ;E148: D7 08          '..'
        LDAB    #$72                     ;E14A: C6 72          '.r'
        LDX     #M0080                   ;E14C: CE 00 80       '...'
        BSR     ZE125                    ;E14F: 8D D4          '..'
        LDAB    #$A1                     ;E151: C6 A1          '..'
        LDX     #SWITCHES_READ_IDX                   ;E153: CE 00 BC       '...'
        BSR     ZE125                    ;E156: 8D CD          '..'
        LDAA    #$FF                     ;E158: 86 FF          '..'
        STAA    M00DA                    ;E15A: 97 DA          '..'
        STAA    M00DB                    ;E15C: 97 DB          '..'
        LDX     #LEDS_STATE_PTR                   ;E15E: CE 00 B8       '...'
        LDAA    #$E8                     ;E161: 86 E8          '..'
        STAA    ,X                       ;E163: A7 00          '..'
        STAA    M00D6                    ;E165: 97 D6          '..'
        LDAA    #$D0                     ;E167: 86 D0          '..'
        STAA    $01,X                    ;E169: A7 01          '..'
        STAA    M00D7                    ;E16B: 97 D7          '..'
        LDAA    #$B0                     ;E16D: 86 B0          '..'
        STAA    $02,X                    ;E16F: A7 02          '..'
        LDAA    #$76                     ;E171: 86 76          '.v'
        STAA    $03,X                    ;E173: A7 03          '..'
        LDAA    #$60                     ;E175: 86 60          '.`'
        STAA    M00D0                    ;E177: 97 D0          '..'
        STAA    M00D1                    ;E179: 97 D1          '..'
        STAA    M00D2                    ;E17B: 97 D2          '..'
        INC     >M00DC                   ;E17D: 7C 00 DC       '|..'
        OIM     #$01,M009F               ;E180: 72 01 9F       'r..'
        LDAA    LEDS_STATE_PTR                    ;E183: 96 B8          '..'
        STAA    LEDS_LATCH                    ;E185: B7 20 00       '. .'
        NOP                              ;E188: 01             '.'
        NOP                              ;E189: 01             '.'
        LDAA    SWITCHES_LATCH                    ;E18A: B6 10 00       '...'
        ANDA    #$08                     ;E18D: 84 08          '..'
        STAA    M0094                    ;E18F: 97 94          '..'
        LDAA    LEDS_STATE_PTR_2                    ;E191: 96 BB          '..'
        STAA    LEDS_LATCH                    ;E193: B7 20 00       '. .'
        NOP                              ;E196: 01             '.'
        NOP                              ;E197: 01             '.'
        LDAA    SWITCHES_LATCH                    ;E198: B6 10 00       '...'
        ANDA    #$08                     ;E19B: 84 08          '..'
        STAA    M0095                    ;E19D: 97 95          '..'
        ; Check keyboard mode (76/88)
        LDAB    LATCH_IC7                    ;E19F: F6 18 00       '...'
        COMB                             ;E1A2: 53             'S'
        ANDB    #$03                     ;E1A3: C4 03          '..'
        STAB    KEY_MODEL_MODE                    ;E1A5: D7 C0          '..'
        LDX     #ME000                   ;E1A7: CE E0 00       '...'
        BITB    #$01                     ;E1AA: C5 01          '..'
        BEQ     ZE1B1                    ;E1AC: 27 03          ''.'
        LDX     #ME006                   ;E1AE: CE E0 06       '...'
ZE1B1   JSR     ZE00C                    ;E1B1: BD E0 0C       '...'
        LDAA    SWITCHES_LATCH                    ;E1B4: B6 10 00       '...'
        COMA                             ;E1B7: 43             'C'
        ANDA    #$40                     ;E1B8: 84 40          '.@'
        STAA    M0090                    ;E1BA: 97 90          '..'
        ; Check Test mode switch
        LDAB    LATCH_IC7                    ;E1BC: F6 18 00       '...'
        COMB                             ;E1BF: 53             'S'
        TBA                              ;E1C0: 17             '.'
        ANDB    #$20                     ;E1C1: C4 20          '. '
        STAB    TEST_MODE_SW                    ;E1C3: D7 92          '..'
        TAB                              ;E1C5: 16             '.'
        ANDB    #$04                     ;E1C6: C4 04          '..'
        STAB    M0096                    ;E1C8: D7 96          '..'
        LDAA    #$FB                     ;E1CA: 86 FB          '..'
        TSTB                             ;E1CC: 5D             ']'
        BNE     ZE1D5                    ;E1CD: 26 06          '&.'
        LDAB    M0093                    ;E1CF: D6 93          '..'
        BEQ     ZE1D5                    ;E1D1: 27 02          ''.'
        LDAA    #$FC                     ;E1D3: 86 FC          '..'
ZE1D5   STAA    M0097                    ;E1D5: 97 97          '..'
        LDAA    KEY_MODEL_MODE                    ;E1D7: 96 C0          '..'
        CLRB                             ;E1D9: 5F             '_'
        BITA    #$02                     ;E1DA: 85 02          '..'
        BEQ     ZE1E6                    ;E1DC: 27 08          ''.'
        LDAB    #$07                     ;E1DE: C6 07          '..'
        BITA    #$01                     ;E1E0: 85 01          '..'
        BNE     ZE1E6                    ;E1E2: 26 02          '&.'
        LDAB    #$03                     ;E1E4: C6 03          '..'
ZE1E6   STAB    M00BD                    ;E1E6: D7 BD          '..'
        LDAB    M00BD                    ;E1E8: D6 BD          '..'
        LDAA    #$15                     ;E1EA: 86 15          '..'
        STAA    M00BF                    ;E1EC: 97 BF          '..'
        ABA                              ;E1EE: 1B             '.'
        STAA    M00AF                    ;E1EF: 97 AF          '..'
        LDAA    #$27                     ;E1F1: 86 27          '.''
        SUBA    M00BD                    ;E1F3: 90 BD          '..'
        STAA    M00CE                    ;E1F5: 97 CE          '..'
        LDX     #M0900                   ;E1F7: CE 09 00       '...'
        LDAB    M00BD                    ;E1FA: D6 BD          '..'
        ADDB    #$04                     ;E1FC: CB 04          '..'
        BRA     ZE214                    ;E1FE: 20 14          ' .'
ZE200   TBA                              ;E200: 17             '.'
        SUBA    #$07                     ;E201: 80 07          '..'
        BCC     ZE207                    ;E203: 24 02          '$.'
        ADDA    #$07                     ;E205: 8B 07          '..'
ZE207   RORA                             ;E207: 46             'F'
        RORA                             ;E208: 46             'F'
        ANDA    #$80                     ;E209: 84 80          '..'
        STAA    ,X                       ;E20B: A7 00          '..'
        INX                              ;E20D: 08             '.'
        CPX     #M0958                   ;E20E: 8C 09 58       '..X'
        BCC     ZE21C                    ;E211: 24 09          '$.'
        INCB                             ;E213: 5C             '\'
ZE214   SUBB    #$0C                     ;E214: C0 0C          '..'
        BCC     ZE200                    ;E216: 24 E8          '$.'
        ADDB    #$0C                     ;E218: CB 0C          '..'
        BRA     ZE200                    ;E21A: 20 E4          ' .'
ZE21C   LDAA    #$02                     ;E21C: 86 02          '..'
        LDAB    KEY_MODEL_MODE                    ;E21E: D6 C0          '..'
        BITB    #$01                     ;E220: C5 01          '..'
        BEQ     ZE226                    ;E222: 27 02          ''.'
        ORAA    #$08                     ;E224: 8A 08          '..'
ZE226   STAA    M097F                    ;E226: B7 09 7F       '...'
        LDX     #M0AC0                   ;E229: CE 0A C0       '...'
        LDAB    #$80                     ;E22C: C6 80          '..'
        JSR     ZE125                    ;E22E: BD E1 25       '..%'
        LDX     #M0A80                   ;E231: CE 0A 80       '...'
        STX     M008D                    ;E234: DF 8D          '..'
        LDX     #M0B40                   ;E236: CE 0B 40       '..@'
        STX     M0081                    ;E239: DF 81          '..'
        STX     M0083                    ;E23B: DF 83          '..'
        LDX     #M0C40                   ;E23D: CE 0C 40       '..@'
        STX     MIDIOUT_BUF_WRITE_POS                    ;E240: DF 85          '..'
        STX     MIDIOUT_BUF_READ_POS                    ;E242: DF 87          '..'
        LDX     #M0980                   ;E244: CE 09 80       '...'
        LDAB    #$58                     ;E247: C6 58          '.X'
        JSR     ZE125                    ;E249: BD E1 25       '..%'
        LDX     #M0A00                   ;E24C: CE 0A 00       '...'
        LDAB    #$B0                     ;E24F: C6 B0          '..'
        JSR     ZE125                    ;E251: BD E1 25       '..%'
        LDAA    TEST_MODE_SW                    ;E254: 96 92          '..'
        BEQ     ZE276                    ;E256: 27 1E          ''.'
        LDAA    M00BA                    ;E258: 96 BA          '..'
        STAA    LEDS_LATCH                    ;E25A: B7 20 00       '. .'
        NOP                              ;E25D: 01             '.'
        NOP                              ;E25E: 01             '.'
        LDAA    SWITCHES_LATCH                    ;E25F: B6 10 00       '...'
        LDAB    LEDS_STATE_PTR                    ;E262: D6 B8          '..'
        STAB    LEDS_LATCH                    ;E264: F7 20 00       '. .'
        TAB                              ;E267: 16             '.'
        ; Check for chorus button?
        ANDA    #$02                     ;E268: 84 02          '..'
        BEQ     ZE26F                    ;E26A: 27 03          ''.'
        JMP     ZF121                    ;E26C: 7E F1 21       '~.!'
ZE26F   ANDB    #$08                     ;E26F: C4 08          '..'
        BEQ     ZE276                    ;E271: 27 03          ''.'
        JMP     ZF1DF                    ;E273: 7E F1 DF       '~..'

        ; Test mode?
ZE276   LDAA    SWITCHES_LATCH                    ;E276: B6 10 00       '...'
        COMA                             ;E279: 43             'C'
        BITA    #$80                     ;E27A: 85 80          '..'
        BEQ     ZE28A                    ;E27C: 27 0C          ''.'
        LDAB    #$F0                     ;E27E: C6 F0          '..'
        JSR     ZE5BB                    ;E280: BD E5 BB       '...'
        LDAA    #$05                     ;E283: 86 05          '..'
        LDAB    #$01                     ;E285: C6 01          '..'
        JSR     ZE5EA                    ;E287: BD E5 EA       '...'
ZE28A   JSR     ZEA2C                    ;E28A: BD EA 2C       '..,'
        LDAA    #$7F                     ;E28D: 86 7F          '..'
        STAA    LAST_TUNING                    ;E28F: 97 CD          '..'
        JSR     ZEAB2                    ;E291: BD EA B2       '...'
        LDAA    #$00                     ;E294: 86 00          '..'
        LDAB    KEY_MODEL_MODE                    ;E296: D6 C0          '..'
        BITB    #$01                     ;E298: C5 01          '..'
        BEQ     ZE29E                    ;E29A: 27 02          ''.'
        ORAA    #$08                     ;E29C: 8A 08          '..'
ZE29E   STAA    M097F                    ;E29E: B7 09 7F       '...'
        CLI                              ;E2A1: 0E             '.'
        LDAB    M00DD                    ;E2A2: D6 DD          '..'
        STAB    M00DE                    ;E2A4: D7 DE          '..'
        CLRA                             ;E2A6: 4F             'O'
        ; Omni mode off
        LDAB    #$7C                     ;E2A7: C6 7C          '.|'
        JSR     MIDI_SEND_CC                    ;E2A9: BD E7 49       '..I'
        CLRA                             ;E2AC: 4F             'O'
        ; Poly mode
        LDAB    #$7F                     ;E2AD: C6 7F          '..'
        JSR     MIDI_SEND_CC                    ;E2AF: BD E7 49       '..I'
        LDAB    M00DC                    ;E2B2: D6 DC          '..'
        STAB    M00DE                    ;E2B4: D7 DE          '..'
        CLRA                             ;E2B6: 4F             'O'
        ; Omni mode off
        LDAB    #$7C                     ;E2B7: C6 7C          '.|'
        JSR     MIDI_SEND_CC                    ;E2B9: BD E7 49       '..I'
        CLRA                             ;E2BC: 4F             'O'
        ; Poly mode
        LDAB    #$7F                     ;E2BD: C6 7F          '..'
        JSR     MIDI_SEND_CC                    ;E2BF: BD E7 49       '..I'
        BRA     ZE2C4                    ;E2C2: 20 00          ' .'

        ; Main loop start?
ZE2C4   JSR     ZEFC9                    ;E2C4: BD EF C9       '...'
        LDD     M00E5                    ;E2C7: DC E5          '..'
        BEQ     ZE2DE                    ;E2C9: 27 13          ''.'
        TSTA                             ;E2CB: 4D             'M'
        BNE     ZE2DC                    ;E2CC: 26 0E          '&.'
        TIM     #$20,M00D1               ;E2CE: 7B 20 D1       '{ .'
        BEQ     ZE2DC                    ;E2D1: 27 09          ''.'
        LDAB    M00DD                    ;E2D3: D6 DD          '..'
        STAB    M00DE                    ;E2D5: D7 DE          '..'
        ; All notes off
        LDAB    #$7B                     ;E2D7: C6 7B          '.{'
        JSR     MIDI_SEND_CC                    ;E2D9: BD E7 49       '..I'
ZE2DC   STAA    M00E6                    ;E2DC: 97 E6          '..'
ZE2DE   LDD     M00E3                    ;E2DE: DC E3          '..'
        BEQ     ZE2F5                    ;E2E0: 27 13          ''.'
        TSTA                             ;E2E2: 4D             'M'
        BNE     ZE2F3                    ;E2E3: 26 0E          '&.'
        TIM     #$40,M00D1               ;E2E5: 7B 40 D1       '{@.'
        BEQ     ZE2F3                    ;E2E8: 27 09          ''.'
        LDAB    M00DC                    ;E2EA: D6 DC          '..'
        STAB    M00DE                    ;E2EC: D7 DE          '..'
        ; All notes off
        LDAB    #$7B                     ;E2EE: C6 7B          '.{'
        JSR     MIDI_SEND_CC                    ;E2F0: BD E7 49       '..I'
ZE2F3   STAA    M00E4                    ;E2F3: 97 E4          '..'
ZE2F5   LDAA    P1DR                     ;E2F5: 96 02          '..'
        BNE     ZE302                    ;E2F7: 26 09          '&.'
        LDAA    IC5_LATCH_STATE                    ;E2F9: 96 98          '..'
        ; All off
        ANDA    #$FB                     ;E2FB: 84 FB          '..'
        STAA    IC5_LATCH_STATE                    ;E2FD: 97 98          '..'
        STAA    IC5_LATCH                    ;E2FF: B7 28 00       '.(.'
ZE302   LDAA    #$14                     ;E302: 86 14          '..'
        STAA    M009C                    ;E304: 97 9C          '..'
ZE306   LDAA    M0099                    ;E306: 96 99          '..'
        BNE     ZE320                    ;E308: 26 16          '&.'
        LDX     #M0A00                   ;E30A: CE 0A 00       '...'
ZE30D   LDAA    ,X                       ;E30D: A6 00          '..'
        CMPA    $58,X                    ;E30F: A1 58          '.X'
        BEQ     ZE31A                    ;E311: 27 07          ''.'
        STX     M008B                    ;E313: DF 8B          '..'
        JSR     ZE4A5                    ;E315: BD E4 A5       '...'
        LDX     M008B                    ;E318: DE 8B          '..'
ZE31A   INX                              ;E31A: 08             '.'
        CPX     #M0A58                   ;E31B: 8C 0A 58       '..X'
        BCS     ZE30D                    ;E31E: 25 ED          '%.'
ZE320   LDX     M0083                    ;E320: DE 83          '..'
        CPX     M0081                    ;E322: 9C 81          '..'
        BEQ     ZE32B                    ;E324: 27 05          ''.'
        JSR     ZE5F9                    ;E326: BD E5 F9       '...'
        BRA     ZE320                    ;E329: 20 F5          ' .'
        ; Handle sustain
ZE32B   JSR     ZE382                    ;E32B: BD E3 82       '...'
        ; Handle soft
        JSR     ZE3D3                    ;E32E: BD E3 D3       '...'
        ; Handle sostenuto
        JSR     ZE42D                    ;E331: BD E4 2D       '..-'
        LDAA    M009B                    ;E334: 96 9B          '..'
        BEQ     ZE353                    ;E336: 27 1B          ''.'
        BMI     ZE344                    ;E338: 2B 0A          '+.'
        LDAA    M00B0                    ;E33A: 96 B0          '..'
        BNE     ZE353                    ;E33C: 26 15          '&.'
        LDAA    M00A7                    ;E33E: 96 A7          '..'
        BNE     ZE353                    ;E340: 26 11          '&.'
        BRA     ZE350                    ;E342: 20 0C          ' .'
ZE344   LDAA    M00A6                    ;E344: 96 A6          '..'
        BNE     ZE353                    ;E346: 26 0B          '&.'
        LDAA    M00E3                    ;E348: 96 E3          '..'
        BNE     ZE353                    ;E34A: 26 07          '&.'
        LDAA    M00E5                    ;E34C: 96 E5          '..'
        BNE     ZE353                    ;E34E: 26 03          '&.'
ZE350   JSR     ZEA2C                    ;E350: BD EA 2C       '..,'
ZE353   JSR     ZF006                    ;E353: BD F0 06       '...'
        LDAA    M009C                    ;E356: 96 9C          '..'
        DECA                             ;E358: 4A             'J'
        STAA    M009C                    ;E359: 97 9C          '..'
        BEQ     ZE379                    ;E35B: 27 1C          ''.'
        CMPA    #$05                     ;E35D: 81 05          '..'
        BEQ     ZE36B                    ;E35F: 27 0A          ''.'
        CMPA    #$0A                     ;E361: 81 0A          '..'
        BEQ     ZE370                    ;E363: 27 0B          ''.'
        CMPA    #$0F                     ;E365: 81 0F          '..'
        BEQ     ZE36B                    ;E367: 27 02          ''.'
        BRA     ZE306                    ;E369: 20 9B          ' .'
ZE36B   JSR     ZF099                    ;E36B: BD F0 99       '...'
        BRA     ZE306                    ;E36E: 20 96          ' .'
ZE370   LDAA    M0099                    ;E370: 96 99          '..'
        BNE     ZE306                    ;E372: 26 92          '&.'
        ; Handle buttons
        JSR     ZE928                    ;E374: BD E9 28       '..('
        BRA     ZE306                    ;E377: 20 8D          ' .'
ZE379   JSR     ZEB36                    ;E379: BD EB 36       '..6'
        JSR     ZEAB2                    ;E37C: BD EA B2       '...'
        JMP     ZE2C4                    ;E37F: 7E E2 C4       '~..'
        ; Main loop end?

        ; Handle sustain pedal?
ZE382   LDAB    SWITCHES_LATCH                    ;E382: F6 10 00       '...'
        COMB                             ;E385: 53             'S'
        ANDB    #$80                     ;E386: C4 80          '..'
        CMPB    M00A6                    ;E388: D1 A6          '..'
        BEQ     ZE3AF                    ;E38A: 27 23          ''#'
        CLRA                             ;E38C: 4F             'O'
        STAB    M00A6                    ;E38D: D7 A6          '..'
        BPL     ZE393                    ;E38F: 2A 02          '*.'
        LDAA    #$7F                     ;E391: 86 7F          '..'
ZE393   TIM     #$20,M00D1               ;E393: 7B 20 D1       '{ .'
        BEQ     ZE3A1                    ;E396: 27 09          ''.'
        LDAB    M00DD                    ;E398: D6 DD          '..'
        STAB    M00DE                    ;E39A: D7 DE          '..'
        LDAB    #$40                     ;E39C: C6 40          '.@'
        JSR     MIDI_SEND_CC                    ;E39E: BD E7 49       '..I'
ZE3A1   TIM     #$40,M00D1               ;E3A1: 7B 40 D1       '{@.'
        BEQ     ZE3AF                    ;E3A4: 27 09          ''.'
        LDAB    M00DC                    ;E3A6: D6 DC          '..'
        STAB    M00DE                    ;E3A8: D7 DE          '..'
        LDAB    #$40                     ;E3AA: C6 40          '.@'
        JSR     MIDI_SEND_CC                    ;E3AC: BD E7 49       '..I'
ZE3AF   LDAA    M00A7                    ;E3AF: 96 A7          '..'
        LDAB    M00D0                    ;E3B1: D6 D0          '..'
        BEQ     ZE3B7                    ;E3B3: 27 02          ''.'
        ORAA    M00A6                    ;E3B5: 9A A6          '..'
ZE3B7   CMPA    M00A8                    ;E3B7: 91 A8          '..'
        BNE     ZE3BC                    ;E3B9: 26 01          '&.'
        RTS                              ;E3BB: 39             '9'
ZE3BC   LDAB    M00A8                    ;E3BC: D6 A8          '..'
        STAA    M00A8                    ;E3BE: 97 A8          '..'
        BEQ     ZE3CB                    ;E3C0: 27 09          ''.'
        TSTB                             ;E3C2: 5D             ']'
        BNE     ZE3CA                    ;E3C3: 26 05          '&.'
        LDAB    #$5F                     ;E3C5: C6 5F          '._'
        JMP     CPUBSEND_1                    ;E3C7: 7E E5 EE       '~..'
ZE3CA   RTS                              ;E3CA: 39             '9'
ZE3CB   TSTB                             ;E3CB: 5D             ']'
        BEQ     ZE3CA                    ;E3CC: 27 FC          ''.'
        LDAB    #$50                     ;E3CE: C6 50          '.P'
        JMP     CPUBSEND_1                    ;E3D0: 7E E5 EE       '~..'

        ; Handle soft pedal?
ZE3D3   LDAB    M0090                    ;E3D3: D6 90          '..'
        BNE     ZE409                    ;E3D5: 26 32          '&2'
        LDAB    M00E8                    ;E3D7: D6 E8          '..'
        BNE     ZE409                    ;E3D9: 26 2E          '&.'
        LDAB    SWITCHES_LATCH                    ;E3DB: F6 10 00       '...'
        COMB                             ;E3DE: 53             'S'
        ANDB    #$40                     ;E3DF: C4 40          '.@'
        ASLB                             ;E3E1: 58             'X'
        CMPB    SOFT_1                    ;E3E2: D1 A9          '..'
        BEQ     ZE409                    ;E3E4: 27 23          ''#'
        CLRA                             ;E3E6: 4F             'O'
        STAB    SOFT_1                    ;E3E7: D7 A9          '..'
        BEQ     ZE3ED                    ;E3E9: 27 02          ''.'
        LDAA    #$7F                     ;E3EB: 86 7F          '..'
ZE3ED   TIM     #$20,M00D1               ;E3ED: 7B 20 D1       '{ .'
        BEQ     ZE3FB                    ;E3F0: 27 09          ''.'
        LDAB    M00DD                    ;E3F2: D6 DD          '..'
        STAB    M00DE                    ;E3F4: D7 DE          '..'
        LDAB    #$43                     ;E3F6: C6 43          '.C'
        JSR     MIDI_SEND_CC                    ;E3F8: BD E7 49       '..I'
ZE3FB   TIM     #$40,M00D1               ;E3FB: 7B 40 D1       '{@.'
        BEQ     ZE409                    ;E3FE: 27 09          ''.'
        LDAB    M00DC                    ;E400: D6 DC          '..'
        STAB    M00DE                    ;E402: D7 DE          '..'
        LDAB    #$43                     ;E404: C6 43          '.C'
        JSR     MIDI_SEND_CC                    ;E406: BD E7 49       '..I'
ZE409   LDAA    SOFT_2                    ;E409: 96 AA          '..'
        LDAB    M00D0                    ;E40B: D6 D0          '..'
        BEQ     ZE411                    ;E40D: 27 02          ''.'
        ORAA    SOFT_1                    ;E40F: 9A A9          '..'
ZE411   CMPA    SOFT_3                    ;E411: 91 AB          '..'
        BNE     ZE416                    ;E413: 26 01          '&.'
        RTS                              ;E415: 39             '9'
ZE416   LDAB    SOFT_3                    ;E416: D6 AB          '..'
        STAA    SOFT_3                    ;E418: 97 AB          '..'
        BEQ     ZE425                    ;E41A: 27 09          ''.'
        TSTB                             ;E41C: 5D             ']'
        BNE     ZE424                    ;E41D: 26 05          '&.'
        LDAB    #$7F                     ;E41F: C6 7F          '..'
        JMP     CPUBSEND_1                    ;E421: 7E E5 EE       '~..'
ZE424   RTS                              ;E424: 39             '9'
ZE425   TSTB                             ;E425: 5D             ']'
        BEQ     ZE424                    ;E426: 27 FC          ''.'
        LDAB    #$70                     ;E428: C6 70          '.p'
        JMP     CPUBSEND_1                    ;E42A: 7E E5 EE       '~..'

        ; Handle sostenuto pedal?
ZE42D   LDAB    M0090                    ;E42D: D6 90          '..'
        BEQ     ZE463                    ;E42F: 27 32          ''2'
        LDAB    M00E8                    ;E431: D6 E8          '..'
        BNE     ZE463                    ;E433: 26 2E          '&.'
        LDAB    SWITCHES_LATCH                    ;E435: F6 10 00       '...'
        COMB                             ;E438: 53             'S'
        ANDB    #$40                     ;E439: C4 40          '.@'
        ASLB                             ;E43B: 58             'X'
        CMPB    M00AC                    ;E43C: D1 AC          '..'
        BEQ     ZE463                    ;E43E: 27 23          ''#'
        CLRA                             ;E440: 4F             'O'
        STAB    M00AC                    ;E441: D7 AC          '..'
        BEQ     ZE447                    ;E443: 27 02          ''.'
        LDAA    #$7F                     ;E445: 86 7F          '..'
ZE447   TIM     #$20,M00D1               ;E447: 7B 20 D1       '{ .'
        BEQ     ZE455                    ;E44A: 27 09          ''.'
        LDAB    M00DD                    ;E44C: D6 DD          '..'
        STAB    M00DE                    ;E44E: D7 DE          '..'
        LDAB    #$42                     ;E450: C6 42          '.B'
        JSR     MIDI_SEND_CC                    ;E452: BD E7 49       '..I'
ZE455   TIM     #$40,M00D1               ;E455: 7B 40 D1       '{@.'
        BEQ     ZE463                    ;E458: 27 09          ''.'
        LDAB    M00DC                    ;E45A: D6 DC          '..'
        STAB    M00DE                    ;E45C: D7 DE          '..'
        LDAB    #$42                     ;E45E: C6 42          '.B'
        JSR     MIDI_SEND_CC                    ;E460: BD E7 49       '..I'
ZE463   LDAA    M00AD                    ;E463: 96 AD          '..'
        LDAB    M00D0                    ;E465: D6 D0          '..'
        BEQ     ZE46B                    ;E467: 27 02          ''.'
        ORAA    M00AC                    ;E469: 9A AC          '..'
ZE46B   CMPA    M00AE                    ;E46B: 91 AE          '..'
        BNE     ZE470                    ;E46D: 26 01          '&.'
        RTS                              ;E46F: 39             '9'
ZE470   LDAB    M00AE                    ;E470: D6 AE          '..'
        STAA    M00AE                    ;E472: 97 AE          '..'
        BEQ     ZE490                    ;E474: 27 1A          ''.'
        TSTB                             ;E476: 5D             ']'
        BNE     ZE48F                    ;E477: 26 16          '&.'
        LDAB    #$6F                     ;E479: C6 6F          '.o'
        JSR     CPUBSEND_1                    ;E47B: BD E5 EE       '...'
        LDX     #M0A80                   ;E47E: CE 0A 80       '...'
ZE481   LDAB    $40,X                    ;E481: E6 40          '.@'
        BPL     ZE489                    ;E483: 2A 04          '*.'
        ORAB    #$20                     ;E485: CA 20          '. '
        STAB    $40,X                    ;E487: E7 40          '.@'
ZE489   INX                              ;E489: 08             '.'
        CPX     #M0B00                   ;E48A: 8C 0B 00       '...'
        BCS     ZE481                    ;E48D: 25 F2          '%.'
ZE48F   RTS                              ;E48F: 39             '9'
ZE490   TSTB                             ;E490: 5D             ']'
        BEQ     ZE48F                    ;E491: 27 FC          ''.'
        LDAB    #$60                     ;E493: C6 60          '.`'
        JSR     CPUBSEND_1                    ;E495: BD E5 EE       '...'
        LDX     #M0A80                   ;E498: CE 0A 80       '...'
ZE49B   AIM     #$DF,$00,U               ;E49B: 61 DF 40       'a.@'
        INX                              ;E49E: 08             '.'
        CPX     #M0B00                   ;E49F: 8C 0B 00       '...'
        BCS     ZE49B                    ;E4A2: 25 F7          '%.'
        RTS                              ;E4A4: 39             '9'

ZE4A5   TAB                              ;E4A5: 16             '.'
        CMPA    #$80                     ;E4A6: 81 80          '..'
        BEQ     ZE4D4                    ;E4A8: 27 2A          ''*'
        ANDB    #$7F                     ;E4AA: C4 7F          '..'
        STAB    M008F                    ;E4AC: D7 8F          '..'
        LDAB    M008C                    ;E4AE: D6 8C          '..'
        ADDB    M00AF                    ;E4B0: DB AF          '..'
        ORAB    #$80                     ;E4B2: CA 80          '..'
        STAB    MAYBE_MIDI_NOTE_N                    ;E4B4: D7 8E          '..'
        LDAB    $58,X                    ;E4B6: E6 58          '.X'
        STAA    $58,X                    ;E4B8: A7 58          '.X'
        BEQ     ZE517                    ;E4BA: 27 5B          ''['
        TSTB                             ;E4BC: 5D             ']'
        BEQ     ZE4C2                    ;E4BD: 27 03          ''.'
        JSR     ZE566                    ;E4BF: BD E5 66       '..f'
ZE4C2   LDAB    M00CF                    ;E4C2: D6 CF          '..'
        BEQ     ZE4DF                    ;E4C4: 27 19          ''.'
        BSR     ZE50E                    ;E4C6: 8D 46          '.F'
        BCS     ZE4D5                    ;E4C8: 25 0B          '%.'
        BSR     ZE4EA                    ;E4CA: 8D 1E          '..'
        TIM     #$20,M00D0               ;E4CC: 7B 20 D0       '{ .'
        BEQ     ZE4D4                    ;E4CF: 27 03          ''.'
        JMP     ZE58E                    ;E4D1: 7E E5 8E       '~..'
ZE4D4   RTS                              ;E4D4: 39             '9'

ZE4D5   BSR     ZE4FC                    ;E4D5: 8D 25          '.%'
        TIM     #$40,M00D0               ;E4D7: 7B 40 D0       '{@.'
        BEQ     ZE4D4                    ;E4DA: 27 F8          ''.'
        JMP     ZE58E                    ;E4DC: 7E E5 8E       '~..'
ZE4DF   BSR     ZE4EA                    ;E4DF: 8D 09          '..'
        BSR     ZE4FC                    ;E4E1: 8D 19          '..'
        LDAB    M00D0                    ;E4E3: D6 D0          '..'
        BEQ     ZE4D4                    ;E4E5: 27 ED          ''.'
        JMP     ZE58E                    ;E4E7: 7E E5 8E       '~..'
ZE4EA   INC     >M00E5                   ;E4EA: 7C 00 E5       '|..'
        TIM     #$20,M00D1               ;E4ED: 7B 20 D1       '{ .'
        BEQ     ZE4D4                    ;E4F0: 27 E2          ''.'
        LDAB    M00DD                    ;E4F2: D6 DD          '..'
        STAB    M00DE                    ;E4F4: D7 DE          '..'
        LDAA    M008F                    ;E4F6: 96 8F          '..'
        JSR     MIDI_SEND_MAYBE_NOTEON                    ;E4F8: BD E7 51       '..Q'
        RTS                              ;E4FB: 39             '9'

ZE4FC   INC     >M00E3                   ;E4FC: 7C 00 E3       '|..'
        TIM     #$40,M00D1               ;E4FF: 7B 40 D1       '{@.'
        BEQ     ZE4D4                    ;E502: 27 D0          ''.'
        LDAB    M00DC                    ;E504: D6 DC          '..'
        STAB    M00DE                    ;E506: D7 DE          '..'
        LDAA    M008F                    ;E508: 96 8F          '..'
        JSR     MIDI_SEND_MAYBE_NOTEON                    ;E50A: BD E7 51       '..Q'
        RTS                              ;E50D: 39             '9'

ZE50E   LDAB    MAYBE_MIDI_NOTE_N                    ;E50E: D6 8E          '..'
        ANDB    #$7F                     ;E510: C4 7F          '..'
        SUBB    M00AF                    ;E512: D0 AF          '..'
        CMPB    M00CE                    ;E514: D1 CE          '..'
        RTS                              ;E516: 39             '9'

ZE517   LDAB    M00CF                    ;E517: D6 CF          '..'
        BEQ     ZE52F                    ;E519: 27 14          ''.'
        BSR     ZE50E                    ;E51B: 8D F1          '..'
        BCS     ZE527                    ;E51D: 25 08          '%.'
        BSR     ZE544                    ;E51F: 8D 23          '.#'
        TIM     #$20,M00D0               ;E521: 7B 20 D0       '{ .'
        BNE     ZE538                    ;E524: 26 12          '&.'
        RTS                              ;E526: 39             '9'

ZE527   BSR     ZE555                    ;E527: 8D 2C          '.,'
        TIM     #$40,M00D0               ;E529: 7B 40 D0       '{@.'
        BNE     ZE538                    ;E52C: 26 0A          '&.'
        RTS                              ;E52E: 39             '9'

ZE52F   BSR     ZE544                    ;E52F: 8D 13          '..'
        BSR     ZE555                    ;E531: 8D 22          '."'
        LDAB    M00D0                    ;E533: D6 D0          '..'
        BNE     ZE538                    ;E535: 26 01          '&.'
        RTS                              ;E537: 39             '9'

ZE538   LDX     M008D                    ;E538: DE 8D          '..'
        AIM     #$EF,$00,U               ;E53A: 61 EF 40       'a.@'
        LDAB    $40,X                    ;E53D: E6 40          '.@'
        BITB    #$40                     ;E53F: C5 40          '.@'
        BEQ     ZE579                    ;E541: 27 36          ''6'
        RTS                              ;E543: 39             '9'

ZE544   DEC     >M00E5                   ;E544: 7A 00 E5       'z..'
        TIM     #$20,M00D1               ;E547: 7B 20 D1       '{ .'
        BEQ     ZE565                    ;E54A: 27 19          ''.'
        LDAB    M00DD                    ;E54C: D6 DD          '..'
        STAB    M00DE                    ;E54E: D7 DE          '..'
        CLRA                             ;E550: 4F             'O'
        JSR     MIDI_SEND_MAYBE_NOTEON                    ;E551: BD E7 51       '..Q'
        RTS                              ;E554: 39             '9'

ZE555   DEC     >M00E3                   ;E555: 7A 00 E3       'z..'
        TIM     #$40,M00D1               ;E558: 7B 40 D1       '{@.'
        BEQ     ZE565                    ;E55B: 27 08          ''.'
        LDAB    M00DC                    ;E55D: D6 DC          '..'
        STAB    M00DE                    ;E55F: D7 DE          '..'
        CLRA                             ;E561: 4F             'O'
        JSR     MIDI_SEND_MAYBE_NOTEON                    ;E562: BD E7 51       '..Q'
ZE565   RTS                              ;E565: 39             '9'

ZE566   LDAB    M00CF                    ;E566: D6 CF          '..'
        BEQ     ZE574                    ;E568: 27 0A          ''.'
        BSR     ZE50E                    ;E56A: 8D A2          '..'
        BCS     ZE571                    ;E56C: 25 03          '%.'
        BSR     ZE544                    ;E56E: 8D D4          '..'
        RTS                              ;E570: 39             '9'

ZE571   BSR     ZE555                    ;E571: 8D E2          '..'
        RTS                              ;E573: 39             '9'

ZE574   BSR     ZE544                    ;E574: 8D CE          '..'
        BSR     ZE555                    ;E576: 8D DD          '..'
        RTS                              ;E578: 39             '9'

ZE579   LDX     M008D                    ;E579: DE 8D          '..'
        LDAB    $40,X                    ;E57B: E6 40          '.@'
        BPL     ZE58D                    ;E57D: 2A 0E          '*.'
ZE57F   LDAB    #$B0                     ;E57F: C6 B0          '..'
        BSR     ZE5BB                    ;E581: 8D 38          '.8'
        LDAA    MAYBE_MIDI_NOTE_N                    ;E583: 96 8E          '..'
        ANDA    #$7F                     ;E585: 84 7F          '..'
        CLRB                             ;E587: 5F             '_'
        BSR     ZE5EA                    ;E588: 8D 60          '.`'
        AIM     #$7F,$00,U               ;E58A: 61 7F 40       'a.@'
ZE58D   RTS                              ;E58D: 39             '9'

ZE58E   LDX     M008D                    ;E58E: DE 8D          '..'
        OIM     #$10,$00,U               ;E590: 62 10 40       'b.@'
        ; Unmute
ZE593   LDAB    IC5_LATCH_STATE                    ;E593: D6 98          '..'
        ORAB    #$04                     ;E595: CA 04          '..'
        STAB    IC5_LATCH_STATE                    ;E597: D7 98          '..'
        STAB    IC5_LATCH                    ;E599: F7 28 00       '.(.'
        LDX     M008D                    ;E59C: DE 8D          '..'
        LDAB    $40,X                    ;E59E: E6 40          '.@'
        BPL     ZE5A4                    ;E5A0: 2A 02          '*.'
        BSR     ZE57F                    ;E5A2: 8D DB          '..'
ZE5A4   LDAB    #$C0                     ;E5A4: C6 C0          '..'
        TIM     #$20,$00,U               ;E5A6: 6B 20 40       'k @'
        BEQ     ZE5AD                    ;E5A9: 27 02          ''.'
        LDAB    #$D0                     ;E5AB: C6 D0          '..'
ZE5AD   BSR     ZE5BB                    ;E5AD: 8D 0C          '..'
        LDAA    MAYBE_MIDI_NOTE_N                    ;E5AF: 96 8E          '..'
        ANDA    #$7F                     ;E5B1: 84 7F          '..'
        LDAB    M008F                    ;E5B3: D6 8F          '..'
        BSR     ZE5EA                    ;E5B5: 8D 33          '.3'
        OIM     #$80,$00,U               ;E5B7: 62 80 40       'b.@'
        RTS                              ;E5BA: 39             '9'

        ; --> Function Entry
        ; Wait for DAC
ZE5BB   TIM     #$02,P2DR                ;E5BB: 7B 02 03       '{..'
        BNE     ZE5BB                    ;E5BE: 26 FB          '&.'
        ; Set DAV
        LDAA    #$01                     ;E5C0: 86 01          '..'
        STAA    P2DR                     ;E5C2: 97 03          '..'
        ; Send byte from B
        STAB    P1DR                     ;E5C4: D7 02          '..'
        ; Wait for bus is FF
        LDAA    #$FF                     ;E5C6: 86 FF          '..'
ZE5C8   CMPA    P1DR                     ;E5C8: 91 02          '..'
        BNE     ZE5C8                    ;E5CA: 26 FC          '&.'
        ; Change bus dir to input
        LDAA    #$FF                     ;E5CC: 86 FF          '..'
        STAA    M0000                    ;E5CE: 97 00          '..'
        ; Clear DAV
        CLRA                             ;E5D0: 4F             'O'
        STAA    P2DR                     ;E5D1: 97 03          '..'
        RTS                              ;E5D3: 39             '9'

        ; Something send command to CPU-B? multi byte
        ; Wait for DAC
ZE5D4   TIM     #$02,P2DR                ;E5D4: 7B 02 03       '{..'
        BEQ     ZE5D4                    ;E5D7: 27 FB          ''.'
        ; Send byte from A
        STAA    P1DR                     ;E5D9: 97 02          '..'
        ; Set DAV
        LDAA    #$01                     ;E5DB: 86 01          '..'
        STAA    P2DR                     ;E5DD: 97 03          '..'
        ; Wait for DAC
ZE5DF   TIM     #$02,P2DR                ;E5DF: 7B 02 03       '{..'
        BNE     ZE5DF                    ;E5E2: 26 FB          '&.'
        STAB    P1DR                     ;E5E4: D7 02          '..'
        ; Clear DAV
        CLRA                             ;E5E6: 4F             'O'
        STAA    P2DR                     ;E5E7: 97 03          '..'
        RTS                              ;E5E9: 39             '9'
        ; --> Function Entry
ZE5EA   BSR     ZE5D4                    ;E5EA: 8D E8          '..'
        BRA     ZE5F0                    ;E5EC: 20 02          ' .'

        ; --> Function Entry
        ; Something send command to CPU-B?
CPUBSEND_1   BSR     ZE5BB                    ;E5EE: 8D CB          '..'

        ; Wait for DAC
ZE5F0   TIM     #$02,P2DR                ;E5F0: 7B 02 03       '{..'
        BEQ     ZE5F0                    ;E5F3: 27 FB          ''.'
        ; Change bus dir to output
        CLRA                             ;E5F5: 4F             'O'
        STAA    M0000                    ;E5F6: 97 00          '..'
        RTS                              ;E5F8: 39             '9'


ZE5F9   SEI                              ;E5F9: 0F             '.'
        LDAB    ,X                       ;E5FA: E6 00          '..'
        LDAA    $80,X                    ;E5FC: A6 80          '..'
        JSR     ZE872                    ;E5FE: BD E8 72       '..r'
        STX     M0083                    ;E601: DF 83          '..'
        CLI                              ;E603: 0E             '.'
        TSTB                             ;E604: 5D             ']'
        BMI     ZE60A                    ;E605: 2B 03          '+.'
        JMP     ZE6BC                    ;E607: 7E E6 BC       '~..'
ZE60A   CMPB    #$C0                     ;E60A: C1 C0          '..'
        BEQ     ZE65C                    ;E60C: 27 4E          ''N'
        CMPB    #$C3                     ;E60E: C1 C3          '..'
        BEQ     ZE666                    ;E610: 27 54          ''T'
        CMPB    #$C2                     ;E612: C1 C2          '..'
        BEQ     ZE66D                    ;E614: 27 57          ''W'
        TST     >M0094                   ;E616: 7D 00 94       '}..'
        BNE     ZE62A                    ;E619: 26 0F          '&.'
        CMPB    #$DC                     ;E61B: C1 DC          '..'
        BEQ     ZE686                    ;E61D: 27 67          ''g'
        CMPB    #$DD                     ;E61F: C1 DD          '..'
        BEQ     ZE674                    ;E621: 27 51          ''Q'
        CMPB    #$90                     ;E623: C1 90          '..'
        BNE     ZE62A                    ;E625: 26 03          '&.'
        JMP     ZE6EC                    ;E627: 7E E6 EC       '~..'
ZE62A   CMPB    #$FB                     ;E62A: C1 FB          '..'
        BNE     ZE632                    ;E62C: 26 04          '&.'
        CMPA    #$01                     ;E62E: 81 01          '..'
        BEQ     ZE63A                    ;E630: 27 08          ''.'
ZE632   CMPB    M0097                    ;E632: D1 97          '..'
        BCS     ZE65B                    ;E634: 25 25          '%%'
        LDAB    M009F                    ;E636: D6 9F          '..'
        BNE     ZE65B                    ;E638: 26 21          '&!'
ZE63A   LDX     #M0A80                   ;E63A: CE 0A 80       '...'
ZE63D   LDAA    M00B0                    ;E63D: 96 B0          '..'
        BEQ     ZE65B                    ;E63F: 27 1A          ''.'
        TIM     #$40,$00,U               ;E641: 6B 40 40       'k@@'
        BEQ     ZE652                    ;E644: 27 0C          ''.'
        CLRA                             ;E646: 4F             'O'
        STX     M008D                    ;E647: DF 8D          '..'
        LDAB    MAYBE_MIDI_NOTE_N                    ;E649: D6 8E          '..'
        ANDB    #$7F                     ;E64B: C4 7F          '..'
        JSR     ZE6DB                    ;E64D: BD E6 DB       '...'
        LDX     M008D                    ;E650: DE 8D          '..'
ZE652   INX                              ;E652: 08             '.'
        CPX     #M0B00                   ;E653: 8C 0B 00       '...'
        BCS     ZE63D                    ;E656: 25 E5          '%.'
        CLR     >M00B0                   ;E658: 7F 00 B0       '...'
ZE65B   RTS                              ;E65B: 39             '9'

ZE65C   ANDA    #$40                     ;E65C: 84 40          '.@'
        STAA    M00A7                    ;E65E: 97 A7          '..'
        JSR     ZE382                    ;E660: BD E3 82       '...'
        JMP     ZE737                    ;E663: 7E E7 37       '~.7'
ZE666   ANDA    #$40                     ;E666: 84 40          '.@'
        STAA    SOFT_2                    ;E668: 97 AA          '..'
        JMP     ZE3D3                    ;E66A: 7E E3 D3       '~..'
ZE66D   ANDA    #$40                     ;E66D: 84 40          '.@'
        STAA    M00AD                    ;E66F: 97 AD          '..'
        JMP     ZE42D                    ;E671: 7E E4 2D       '~.-'
ZE674   LDX     #M00C5                   ;E674: CE 00 C5       '...'
        LDAB    CURRENT_PGM?                    ;E677: D6 C3          '..'
        ABX                              ;E679: 3A             ':'
        ANDA    #$40                     ;E67A: 84 40          '.@'
        BEQ     ZE682                    ;E67C: 27 04          ''.'
        LDAA    #$02                     ;E67E: 86 02          '..'
        BRA     ZE692                    ;E680: 20 10          ' .'
ZE682   LDAA    #$01                     ;E682: 86 01          '..'
        BRA     ZE698                    ;E684: 20 12          ' .'

ZE686   LDX     #M00C5                   ;E686: CE 00 C5       '...'
        LDAB    CURRENT_PGM?                    ;E689: D6 C3          '..'
        ABX                              ;E68B: 3A             ':'
        ANDA    #$40                     ;E68C: 84 40          '.@'
        BEQ     ZE696                    ;E68E: 27 06          ''.'

        ; Tremolo
        LDAA    #$01                     ;E690: 86 01          '..'
ZE692   ORAA    ,X                       ;E692: AA 00          '..'
        BRA     ZE69A                    ;E694: 20 04          ' .'

        ; Chorus
ZE696   LDAA    #$02                     ;E696: 86 02          '..'

ZE698   ANDA    ,X                       ;E698: A4 00          '..'

        ; Set tremolo/chorus
ZE69A   STAA    ,X                       ;E69A: A7 00          '..'
        STAA    M00D6                    ;E69C: 97 D6          '..'
        LDAB    M009B                    ;E69E: D6 9B          '..'
        BNE     ZE6AC                    ;E6A0: 26 0A          '&.'
        LDAB    IC5_LATCH_STATE                    ;E6A2: D6 98          '..'
        ANDB    #$FC                     ;E6A4: C4 FC          '..'
        ABA                              ;E6A6: 1B             '.'
        STAA    IC5_LATCH_STATE                    ;E6A7: 97 98          '..'
        STAA    IC5_LATCH                    ;E6A9: B7 28 00       '.(.'
ZE6AC   LDAA    M0099                    ;E6AC: 96 99          '..'
        BNE     ZE6BB                    ;E6AE: 26 0B          '&.'
        LDAA    M00D2                    ;E6B0: 96 D2          '..'
        ANDA    #$FC                     ;E6B2: 84 FC          '..'
        ORAA    ,X                       ;E6B4: AA 00          '..'
        STAA    M00D2                    ;E6B6: 97 D2          '..'
        JSR     ZEC33                    ;E6B8: BD EC 33       '..3'
ZE6BB   RTS                              ;E6BB: 39             '9'

ZE6BC   LDX     #M0A80                   ;E6BC: CE 0A 80       '...'
        ABX                              ;E6BF: 3A             ':'
        STX     M008D                    ;E6C0: DF 8D          '..'
        ANDA    #$7F                     ;E6C2: 84 7F          '..'
        STAA    M008F                    ;E6C4: 97 8F          '..'
        BEQ     ZE6D6                    ;E6C6: 27 0E          ''.'
        TIM     #$40,$00,U               ;E6C8: 6B 40 40       'k@@'
        BNE     ZE6D3                    ;E6CB: 26 06          '&.'
        OIM     #$40,$00,U               ;E6CD: 62 40 40       'b@@'
        INC     >M00B0                   ;E6D0: 7C 00 B0       '|..'
ZE6D3   JMP     ZE593                    ;E6D3: 7E E5 93       '~..'
ZE6D6   TIM     #$40,$00,U               ;E6D6: 6B 40 40       'k@@'
        BEQ     ZE6E9                    ;E6D9: 27 0E          ''.'
ZE6DB   AIM     #$BF,$00,U               ;E6DB: 61 BF 40       'a.@'
        DEC     >M00B0                   ;E6DE: 7A 00 B0       'z..'
        TIM     #$10,$00,U               ;E6E1: 6B 10 40       'k.@'
        BNE     ZE6E9                    ;E6E4: 26 03          '&.'
        JSR     ZE579                    ;E6E6: BD E5 79       '..y'
ZE6E9   JMP     ZE737                    ;E6E9: 7E E7 37       '~.7'
ZE6EC   TAB                              ;E6EC: 16             '.'
        ANDB    #$07                     ;E6ED: C4 07          '..'
        LDX     #M00C5                   ;E6EF: CE 00 C5       '...'
        ABX                              ;E6F2: 3A             ':'
        LDAB    M0095                    ;E6F3: D6 95          '..'
        BEQ     ZE6FC                    ;E6F5: 27 05          ''.'
        CMPA    #$08                     ;E6F7: 81 08          '..'
        BCS     ZE711                    ;E6F9: 25 16          '%.'
ZE6FB   RTS                              ;E6FB: 39             '9'

ZE6FC   CMPA    #$20                     ;E6FC: 81 20          '. '
        BCC     ZE6FB                    ;E6FE: 24 FB          '$.'
        TAB                              ;E700: 16             '.'
        ANDB    #$18                     ;E701: C4 18          '..'
        LSRB                             ;E703: 54             'T'
        LSRB                             ;E704: 54             'T'
        LSRB                             ;E705: 54             'T'
        LSRB                             ;E706: 54             'T'
        BCC     ZE70B                    ;E707: 24 02          '$.'
        ORAB    #$02                     ;E709: CA 02          '..'
ZE70B   STAB    ,X                       ;E70B: E7 00          '..'
        ANDA    #$07                     ;E70D: 84 07          '..'
        BRA     ZE717                    ;E70F: 20 06          ' .'
ZE711   ANDA    #$07                     ;E711: 84 07          '..'
        CMPA    CURRENT_PGM?                    ;E713: 91 C3          '..'
        BEQ     ZE6FB                    ;E715: 27 E4          ''.'
ZE717   STAA    CURRENT_PGM?                    ;E717: 97 C3          '..'
        LDAB    #$01                     ;E719: C6 01          '..'
        STAB    M009B                    ;E71B: D7 9B          '..'
        LDAB    ,X                       ;E71D: E6 00          '..'
        STAB    M00D6                    ;E71F: D7 D6          '..'
        TAB                              ;E721: 16             '.'
        JSR     ZEC61                    ;E722: BD EC 61       '..a'
        STAB    M00D7                    ;E725: D7 D7          '..'
        LDAB    M0099                    ;E727: D6 99          '..'
        BNE     ZE737                    ;E729: 26 0C          '&.'
        LDAA    M00D2                    ;E72B: 96 D2          '..'
        ANDA    #$FC                     ;E72D: 84 FC          '..'
        ORAA    M00D6                    ;E72F: 9A D6          '..'
        STAA    M00D2                    ;E731: 97 D2          '..'
        LDAA    M00D7                    ;E733: 96 D7          '..'
        STAA    M00D3                    ;E735: 97 D3          '..'
ZE737   LDAA    M009B                    ;E737: 96 9B          '..'
        BEQ     ZE748                    ;E739: 27 0D          ''.'
        BMI     ZE748                    ;E73B: 2B 0B          '+.'
        LDAA    M00B0                    ;E73D: 96 B0          '..'
        BNE     ZE748                    ;E73F: 26 07          '&.'
        LDAA    M00A7                    ;E741: 96 A7          '..'
        BNE     ZE748                    ;E743: 26 03          '&.'
        JMP     ZEA2C                    ;E745: 7E EA 2C       '~.,'
ZE748   RTS                              ;E748: 39             '9'

        ; Function
MIDI_SEND_CC
        STAA    MIDI_SEND_B2                    ;E749: 97 B1          '..'
ZE74B   STAB    MIDI_SEND_B1                    ;E74B: D7 EB          '..'
        LDAB    #$B0                     ;E74D: C6 B0          '..'
        BRA     ZE759                    ;E74F: 20 08          ' .'

        ; Function
MIDI_SEND_MAYBE_NOTEON
        LDAB    MAYBE_MIDI_NOTE_N                    ;E751: D6 8E          '..'
        ANDB    #$7F                     ;E753: C4 7F          '..'
        STAB    MIDI_SEND_B1                    ;E755: D7 EB          '..'
        LDAB    #$90                     ;E757: C6 90          '..'

ZE759   ORAB    M00DE                    ;E759: DA DE          '..'
        LDX     MIDIOUT_BUF_WRITE_POS                    ;E75B: DE 85          '..'
        CMPB    MIDI_SEND_B2                    ;E75D: D1 B1          '..'
        BEQ     ZE76B                    ;E75F: 27 0A          ''.'
        STAB    MIDI_SEND_B2                    ;E761: D7 B1          '..'
        STAB    ,X                       ;E763: E7 00          '..'
        BSR     ZE789                    ;E765: 8D 22          '."'
ZE767   CPX     MIDIOUT_BUF_READ_POS                    ;E767: 9C 87          '..'
        BEQ     ZE767                    ;E769: 27 FC          ''.'
ZE76B   LDAB    MIDI_SEND_B1                    ;E76B: D6 EB          '..'

        ; Function
MIDI_SEND_OTHER
        STAB    ,X                       ;E76D: E7 00          '..'
        BSR     ZE789                    ;E76F: 8D 18          '..'
ZE771   CPX     MIDIOUT_BUF_READ_POS                    ;E771: 9C 87          '..'
        BEQ     ZE771                    ;E773: 27 FC          ''.'
        TAB                              ;E775: 16             '.'
        STAB    ,X                       ;E776: E7 00          '..'
        BSR     ZE789                    ;E778: 8D 0F          '..'
ZE77A   CPX     MIDIOUT_BUF_READ_POS                    ;E77A: 9C 87          '..'
        BEQ     ZE77A                    ;E77C: 27 FC          ''.'
        SEI                              ;E77E: 0F             '.'
        STX     MIDIOUT_BUF_WRITE_POS                    ;E77F: DF 85          '..'
        LDAB    SER_STATUS                    ;E781: D6 11          '..'
        ORAB    #$04                     ;E783: CA 04          '..'
        STAB    SER_STATUS                    ;E785: D7 11          '..'
        CLI                              ;E787: 0E             '.'
        RTS                              ;E788: 39             '9'

ZE789   INX                              ;E789: 08             '.'
        CPX     #M0D40                   ;E78A: 8C 0D 40       '..@'
        BCS     ZE792                    ;E78D: 25 03          '%.'
        LDX     #M0C40                   ;E78F: CE 0C 40       '..@'
ZE792   RTS                              ;E792: 39             '9'

        ; Serial send interrupt
hdlr_DIV0 LDAA    SER_STATUS                    ;E793: 96 11          '..'
ZE795   BITA    #$40                     ;E795: 85 40          '.@'
        BNE     ZE7C8                    ;E797: 26 2F          '&/'
        TSTA                             ;E799: 4D             'M'
        BMI     ZE7D6                    ;E79A: 2B 3A          '+:'
        CLR     >M00B2                   ;E79C: 7F 00 B2       '...'
        LDAA    ACTIVE_SENS_DATA                    ;E79F: 96 B3          '..'
        BEQ     ZE7AC                    ;E7A1: 27 09          ''.'
        STAA    SER_TRANSMIT                    ;E7A3: 97 13          '..'
        CLR     >ACTIVE_SENS_DATA                   ;E7A5: 7F 00 B3       '...'
        LDX     MIDIOUT_BUF_READ_POS                    ;E7A8: DE 87          '..'
        BRA     ZE7BD                    ;E7AA: 20 11          ' .'
ZE7AC   LDX     MIDIOUT_BUF_READ_POS                    ;E7AC: DE 87          '..'
        LDAA    ,X                       ;E7AE: A6 00          '..'
        STAA    SER_TRANSMIT                    ;E7B0: 97 13          '..'
        INX                              ;E7B2: 08             '.'
        CPX     #M0D40                   ;E7B3: 8C 0D 40       '..@'
        BCS     ZE7BB                    ;E7B6: 25 03          '%.'
        LDX     #M0C40                   ;E7B8: CE 0C 40       '..@'
ZE7BB   STX     MIDIOUT_BUF_READ_POS                    ;E7BB: DF 87          '..'
ZE7BD   CPX     MIDIOUT_BUF_WRITE_POS                    ;E7BD: 9C 85          '..'
        BNE     ZE7C7                    ;E7BF: 26 06          '&.'
        LDAB    SER_STATUS                    ;E7C1: D6 11          '..'
        ANDB    #$FB                     ;E7C3: C4 FB          '..'
        STAB    SER_STATUS                    ;E7C5: D7 11          '..'
ZE7C7   RTI                              ;E7C7: 3B             ';'
ZE7C8   LDAB    SER_RECEIVE                    ;E7C8: D6 12          '..'
        CLRB                             ;E7CA: 5F             '_'
        STAB    M00A1                    ;E7CB: D7 A1          '..'
        STAB    M00A2                    ;E7CD: D7 A2          '..'
        RTI                              ;E7CF: 3B             ';'

        ; Maybe handle midi note on/off
ZE7D0   LDAA    #$90                     ;E7D0: 86 90          '..'
        STAA    ,X                       ;E7D2: A7 00          '..'
        BRA     ZE845                    ;E7D4: 20 6F          ' o'
ZE7D6   CLR     >M00A3                   ;E7D6: 7F 00 A3       '...'
        LDX     M0081                    ;E7D9: DE 81          '..'
        LDAB    SER_RECEIVE                    ;E7DB: D6 12          '..'
        BMI     ZE848                    ;E7DD: 2B 69          '+i'
        LDAA    M00A1                    ;E7DF: 96 A1          '..'
        TST     >M00A2                   ;E7E1: 7D 00 A2       '}..'
        BNE     ZE81F                    ;E7E4: 26 39          '&9'
        CMPA    #$90                     ;E7E6: 81 90          '..'
        BEQ     ZE819                    ;E7E8: 27 2F          ''/'
        CMPA    #$B0                     ;E7EA: 81 B0          '..'
        BEQ     ZE7F8                    ;E7EC: 27 0A          ''.'
        CMPA    #$C0                     ;E7EE: 81 C0          '..'
        BEQ     ZE7D0                    ;E7F0: 27 DE          ''.'
        CMPA    #$80                     ;E7F2: 81 80          '..'
        BNE     ZE81E                    ;E7F4: 26 28          '&('
        BRA     ZE819                    ;E7F6: 20 21          ' !'
ZE7F8   CMPB    #$40                     ;E7F8: C1 40          '.@'
        BCS     ZE816                    ;E7FA: 25 1A          '%.'
        CMPB    #$7C                     ;E7FC: C1 7C          '.|'
        BCS     ZE817                    ;E7FE: 25 17          '%.'
        LDAA    M009E                    ;E800: 96 9E          '..'
        CMPA    M0080                    ;E802: 91 80          '..'
        BNE     ZE816                    ;E804: 26 10          '&.'
        LDX     #ME80F                   ;E806: CE E8 0F       '...'
        ABX                              ;E809: 3A             ':'
        LDAA    M009F                    ;E80A: 96 9F          '..'
        ANDA    ,X                       ;E80C: A4 00          '..'
        ORAA    $04,X                    ;E80E: AA 04          '..'
        STAA    M009F                    ;E810: 97 9F          '..'
        LDX     M0081                    ;E812: DE 81          '..'
        BRA     ZE817                    ;E814: 20 01          ' .'
ZE816   CLRB                             ;E816: 5F             '_'
ZE817   ORAB    #$80                     ;E817: CA 80          '..'
ZE819   STAB    ,X                       ;E819: E7 00          '..'
        INC     >M00A2                   ;E81B: 7C 00 A2       '|..'
ZE81E   RTI                              ;E81E: 3B             ';'

ZE81F   DEC     >M00A2                   ;E81F: 7A 00 A2       'z..'
        CMPA    #$90                     ;E822: 81 90          '..'
        BEQ     ZE845                    ;E824: 27 1F          ''.'
        CMPA    #$B0                     ;E826: 81 B0          '..'
        BNE     ZE840                    ;E828: 26 16          '&.'
        LDAA    ,X                       ;E82A: A6 00          '..'
        CMPA    #$FB                     ;E82C: 81 FB          '..'
        BEQ     ZE844                    ;E82E: 27 14          ''.'
        CMPB    #$01                     ;E830: C1 01          '..'
        BNE     ZE845                    ;E832: 26 11          '&.'
        LDAA    ,X                       ;E834: A6 00          '..'
        CMPA    #$FE                     ;E836: 81 FE          '..'
        BNE     ZE845                    ;E838: 26 0B          '&.'
        LDAA    M009F                    ;E83A: 96 9F          '..'
        ANDA    #$FD                     ;E83C: 84 FD          '..'
        STAA    M009F                    ;E83E: 97 9F          '..'
ZE840   CMPA    #$80                     ;E840: 81 80          '..'
        BNE     ZE845                    ;E842: 26 01          '&.'
ZE844   CLRB                             ;E844: 5F             '_'
ZE845   BSR     ZE87C                    ;E845: 8D 35          '.5'
        RTI                              ;E847: 3B             ';'

ZE848   CMPB    #$F8                     ;E848: C1 F8          '..'
        BCC     ZE86B                    ;E84A: 24 1F          '$.'
        CMPB    #$F0                     ;E84C: C1 F0          '..'
        BCC     ZE85F                    ;E84E: 24 0F          '$.'
        TBA                              ;E850: 17             '.'
        ANDB    #$F0                     ;E851: C4 F0          '..'
        ANDA    #$0F                     ;E853: 84 0F          '..'
        CMPA    M0080                    ;E855: 91 80          '..'
        BEQ     ZE85F                    ;E857: 27 06          ''.'
        TST     >M009F                   ;E859: 7D 00 9F       '}..'
        BNE     ZE85F                    ;E85C: 26 01          '&.'
        INCB                             ;E85E: 5C             '\'
ZE85F   STAB    M00A1                    ;E85F: D7 A1          '..'
        CMPB    #$B0                     ;E861: C1 B0          '..'
        BNE     ZE867                    ;E863: 26 02          '&.'
        STAA    M009E                    ;E865: 97 9E          '..'
ZE867   CLR     >M00A2                   ;E867: 7F 00 A2       '...'
        RTI                              ;E86A: 3B             ';'

ZE86B   CMPB    #$FE                     ;E86B: C1 FE          '..'
        BNE     ZE871                    ;E86D: 26 02          '&.'
        STAB    M00A4                    ;E86F: D7 A4          '..'
ZE871   RTI                              ;E871: 3B             ';'

ZE872   INX                              ;E872: 08             '.'
        CPX     #M0BC0                   ;E873: 8C 0B C0       '...'
        BCS     ZE87B                    ;E876: 25 03          '%.'
        LDX     #M0B40                   ;E878: CE 0B 40       '..@'
ZE87B   RTS                              ;E87B: 39             '9'

ZE87C   STAB    $80,X                    ;E87C: E7 80          '..'
        BSR     ZE872                    ;E87E: 8D F2          '..'
        STX     M0081                    ;E880: DF 81          '..'
        CPX     M0083                    ;E882: 9C 83          '..'
        BNE     ZE88A                    ;E884: 26 04          '&.'
        BSR     ZE872                    ;E886: 8D EA          '..'
        STX     M0083                    ;E888: DF 83          '..'
ZE88A   RTS                              ;E88A: 39             '9'

        LDX     MFEFD                    ;E88B: FE FE FD       '...'
        STD     >M0001                   ;E88E: FD 00 01       '...'
        FCB     $02                      ;E891: 02             '.'
        FCB     $00                      ;E892: 00             '.'

        ; Timer overflow
hdlr_SWI3 INC     >M00A0                   ;E893: 7C 00 A0       '|..'
        LDAA    M00A5                    ;E896: 96 A5          '..'
        INCA                             ;E898: 4C             'L'
        CMPA    #$10                     ;E899: 81 10          '..'
        BNE     ZE8A0                    ;E89B: 26 03          '&.'
        CLRA                             ;E89D: 4F             'O'
        STAA    MIDI_SEND_B2                    ;E89E: 97 B1          '..'
ZE8A0   STAA    M00A5                    ;E8A0: 97 A5          '..'
        INC     >M00A3                   ;E8A2: 7C 00 A3       '|..'
        INC     >M00B2                   ;E8A5: 7C 00 B2       '|..'
        LDAA    M0008                    ;E8A8: 96 08          '..'
        LDAA    M0009                    ;E8AA: 96 09          '..'
        LDAA    M00B2                    ;E8AC: 96 B2          '..'
        CMPA    #$08                     ;E8AE: 81 08          '..'
        BCS     ZE8BC                    ;E8B0: 25 0A          '%.'
        ; MIDI active sensing
        LDAA    #$FE                     ;E8B2: 86 FE          '..'
        STAA    ACTIVE_SENS_DATA                    ;E8B4: 97 B3          '..'
        LDAA    SER_STATUS                    ;E8B6: 96 11          '..'
        ORAA    #$04                     ;E8B8: 8A 04          '..'
        STAA    SER_STATUS                    ;E8BA: 97 11          '..'
ZE8BC   LDAA    M00A4                    ;E8BC: 96 A4          '..'
        BEQ     ZE871                    ;E8BE: 27 B1          ''.'
        LDAA    M00A3                    ;E8C0: 96 A3          '..'
        CMPA    #$0E                     ;E8C2: 81 0E          '..'
        BCS     ZE871                    ;E8C4: 25 AB          '%.'
        CLRA                             ;E8C6: 4F             'O'
        STAA    M00A4                    ;E8C7: 97 A4          '..'
        STAA    M00A3                    ;E8C9: 97 A3          '..'
        STAA    M00A1                    ;E8CB: 97 A1          '..'
        STAA    M00A2                    ;E8CD: 97 A2          '..'
        INCA                             ;E8CF: 4C             'L'
        LDX     M0081                    ;E8D0: DE 81          '..'
        LDAB    #$FB                     ;E8D2: C6 FB          '..'
        STAB    ,X                       ;E8D4: E7 00          '..'
        STAA    $80,X                    ;E8D6: A7 80          '..'
        BSR     ZE872                    ;E8D8: 8D 98          '..'
        LDAB    #$C0                     ;E8DA: C6 C0          '..'
        STAB    ,X                       ;E8DC: E7 00          '..'
        CLRB                             ;E8DE: 5F             '_'
        BSR     ZE87C                    ;E8DF: 8D 9B          '..'
        LDX     M0081                    ;E8E1: DE 81          '..'
        LDAB    #$C3                     ;E8E3: C6 C3          '..'
        STAB    ,X                       ;E8E5: E7 00          '..'
        JMP     ZE844                    ;E8E7: 7E E8 44       '~.D'

        ; IRQ
hdlr_IRQ LDAB    M097C                    ;E8EA: F6 09 7C       '..|'
        ANDB    #$7F                     ;E8ED: C4 7F          '..'
        LDAA    M097D                    ;E8EF: B6 09 7D       '..}'
        LDX     #M0A00                   ;E8F2: CE 0A 00       '...'
        ABX                              ;E8F5: 3A             ':'
        STAA    ,X                       ;E8F6: A7 00          '..'
        LDAA    SER_STATUS                    ;E8F8: 96 11          '..'
        BPL     ZE8FF                    ;E8FA: 2A 03          '*.'
        JMP     ZE795                    ;E8FC: 7E E7 95       '~..'
ZE8FF   RTI                              ;E8FF: 3B             ';'

        ; Timer output compare (handle switches)
hdlr_SWI2
        ; Read switches state increasing the IDX every time
        LDAB    SWITCHES_READ_IDX                    ;E900: D6 BC          '..'
        LDX     #SWITCHES_STATE_0                   ;E902: CE 00 B4       '...'
        ABX                              ;E905: 3A             ':'
        LDAA    SWITCHES_LATCH                    ;E906: B6 10 00       '...'
        ANDA    #$0F                     ;E909: 84 0F          '..'
        STAA    ,X                       ;E90B: A7 00          '..'
        INCB                             ;E90D: 5C             '\'
        CMPB    #$04                     ;E90E: C1 04          '..'
        BCS     ZE913                    ;E910: 25 01          '%.'
        ; Write LEDs
        CLRB                             ;E912: 5F             '_'
ZE913   STAB    SWITCHES_READ_IDX                    ;E913: D7 BC          '..'
        LDX     #LEDS_STATE_PTR                   ;E915: CE 00 B8       '...'
        ABX                              ;E918: 3A             ':'
        LDAA    ,X                       ;E919: A6 00          '..'
        STAA    LEDS_LATCH                    ;E91B: B7 20 00       '. .'
        LDAA    M0008                    ;E91E: 96 08          '..'
        LDD     M0009                    ;E920: DC 09          '..'
        ADDD    #M1F40                   ;E922: C3 1F 40       '..@'
        STD     M000B                    ;E925: DD 0B          '..'
        RTI                              ;E927: 3B             ';'

        ; Handle buttons for program?
ZE928   LDAA    M0099                    ;E928: 96 99          '..'
        BEQ     ZE92D                    ;E92A: 27 01          ''.'
        RTS                              ;E92C: 39             '9'
ZE92D   LDAA    SWITCHES_STATE_0                    ;E92D: 96 B4          '..'
        ASLA                             ;E92F: 48             'H'
        ASLA                             ;E930: 48             'H'
        ASLA                             ;E931: 48             'H'
        ASLA                             ;E932: 48             'H'
        LDAB    SWITCHES_STATE_1                    ;E933: D6 B5          '..'
        ABA                              ;E935: 1B             '.'
        TAB                              ;E936: 16             '.'
        ; Check the new state vs the old one, return if nothing changed
        LDAA    FULL_BTN_STATE                    ;E937: 96 C1          '..'
        STAB    FULL_BTN_STATE                    ;E939: D7 C1          '..'
        EORA    FULL_BTN_STATE                    ;E93B: 98 C1          '..'
        BEQ     ZE97C                    ;E93D: 27 3D          ''='
        CLC                              ;E93F: 0C             '.'
        LDAB    #$FF                     ;E940: C6 FF          '..'
        ; Maybe shift the button value to find the program
ZE942   INCB                             ;E942: 5C             '\'
        ASLA                             ;E943: 48             'H'
        BCC     ZE942                    ;E944: 24 FC          '$.'
        STAB    MIDI_SEND_B1                    ;E946: D7 EB          '..'
        JSR     ZEC61                    ;E948: BD EC 61       '..a'
        ANDB    FULL_BTN_STATE                    ;E94B: D4 C1          '..'
        BNE     ZE954                    ;E94D: 26 05          '&.'
        CLR     >FULL_BTN_STATE                   ;E94F: 7F 00 C1       '...'
        BRA     ZE97C                    ;E952: 20 28          ' ('
ZE954   LDAA    MIDI_SEND_B1                    ;E954: 96 EB          '..'
        CMPA    CURRENT_PGM?                    ;E956: 91 C3          '..'
        BEQ     ZE97C                    ;E958: 27 22          ''"'
        STAA    CURRENT_PGM?                    ;E95A: 97 C3          '..'
        STAB    M00D7                    ;E95C: D7 D7          '..'
        STAB    M00D3                    ;E95E: D7 D3          '..'
        TBA                              ;E960: 17             '.'
        JSR     ZEC4A                    ;E961: BD EC 4A       '..J'
        LDAA    #$80                     ;E964: 86 80          '..'
        STAA    M009B                    ;E966: 97 9B          '..'
        LDX     #M00C5                   ;E968: CE 00 C5       '...'
        LDAB    CURRENT_PGM?                    ;E96B: D6 C3          '..'
        ABX                              ;E96D: 3A             ':'
        LDAB    ,X                       ;E96E: E6 00          '..'
        STAB    M00D6                    ;E970: D7 D6          '..'
        LDAA    M00D2                    ;E972: 96 D2          '..'
        ANDA    #$FC                     ;E974: 84 FC          '..'
        ABA                              ;E976: 1B             '.'
        STAA    M00D2                    ;E977: 97 D2          '..'
        JSR     ZEC33                    ;E979: BD EC 33       '..3'
ZE97C   RTS                              ;E97C: 39             '9'

        PSHB                             ;E97D: 37             '7'
        ANDB    #$0F                     ;E97E: C4 0F          '..'
        LDAA    M00B9                    ;E980: 96 B9          '..'
        ANDA    #$F0                     ;E982: 84 F0          '..'
        ABA                              ;E984: 1B             '.'
        STAA    M00B9                    ;E985: 97 B9          '..'
        PULB                             ;E987: 33             '3'
        LSRB                             ;E988: 54             'T'
        LSRB                             ;E989: 54             'T'
        LSRB                             ;E98A: 54             'T'
        LSRB                             ;E98B: 54             'T'
        LDAA    LEDS_STATE_PTR                    ;E98C: 96 B8          '..'
        ANDA    #$F0                     ;E98E: 84 F0          '..'
        ABA                              ;E990: 1B             '.'
        STAA    LEDS_STATE_PTR                    ;E991: 97 B8          '..'
        RTS                              ;E993: 39             '9'

        ; Maybe send program change?
        LDAA    MIDI_SEND_B1                    ;E994: 96 EB          '..'
        LDAB    #$C0                     ;E996: C6 C0          '..'
        ORAB    M0080                    ;E998: DA 80          '..'
        STAB    MIDI_SEND_B2                    ;E99A: D7 B1          '..'
        LDX     MIDIOUT_BUF_WRITE_POS                    ;E99C: DE 85          '..'
        JSR     MIDI_SEND_OTHER                    ;E99E: BD E7 6D       '..m'
        LDAB    MIDI_SEND_B1                    ;E9A1: D6 EB          '..'
        JSR     ZEC61                    ;E9A3: BD EC 61       '..a'
        RTS                              ;E9A6: 39             '9'

ZE9A7   LDX     #M00C5                   ;E9A7: CE 00 C5       '...'
        LDAB    CURRENT_PGM?                    ;E9AA: D6 C3          '..'
        ABX                              ;E9AC: 3A             ':'
        STAA    MIDI_SEND_B1                    ;E9AD: 97 EB          '..'
        EORA    ,X                       ;E9AF: A8 00          '..'
        STAA    ,X                       ;E9B1: A7 00          '..'
        STAA    M00D6                    ;E9B3: 97 D6          '..'
        LDAB    M00D2                    ;E9B5: D6 D2          '..'
        ANDB    #$FC                     ;E9B7: C4 FC          '..'
        ABA                              ;E9B9: 1B             '.'
        STAA    M00D2                    ;E9BA: 97 D2          '..'
        JSR     ZEC33                    ;E9BC: BD EC 33       '..3'
        LDAA    M009B                    ;E9BF: 96 9B          '..'
        BNE     ZE9CE                    ;E9C1: 26 0B          '&.'
        ; Set chorus/tremolo from midi?
        LDAA    IC5_LATCH_STATE                    ;E9C3: 96 98          '..'
        ANDA    #$FC                     ;E9C5: 84 FC          '..'
        ORAA    ,X                       ;E9C7: AA 00          '..'
        STAA    IC5_LATCH_STATE                    ;E9C9: 97 98          '..'
        STAA    IC5_LATCH                    ;E9CB: B7 28 00       '.(.'
ZE9CE   TST     >M0095                   ;E9CE: 7D 00 95       '}..'
        BEQ     ZEA2B                    ;E9D1: 27 58          ''X'
        LDAA    MIDI_SEND_B1                    ;E9D3: 96 EB          '..'
        ANDA    #$01                     ;E9D5: 84 01          '..'
        BEQ     ZE9FF                    ;E9D7: 27 26          ''&'
        ANDA    ,X                       ;E9D9: A4 00          '..'
        BEQ     ZE9DF                    ;E9DB: 27 02          ''.'
        LDAA    #$7F                     ;E9DD: 86 7F          '..'
ZE9DF   STAA    M00EC                    ;E9DF: 97 EC          '..'
        TIM     #$20,M00D1               ;E9E1: 7B 20 D1       '{ .'
        BEQ     ZE9EF                    ;E9E4: 27 09          ''.'
        LDAB    M00DD                    ;E9E6: D6 DD          '..'
        STAB    M00DE                    ;E9E8: D7 DE          '..'
        ; Tremolo
        LDAB    #$5C                     ;E9EA: C6 5C          '.\'
        JSR     MIDI_SEND_CC                    ;E9EC: BD E7 49       '..I'
ZE9EF   TIM     #$40,M00D1               ;E9EF: 7B 40 D1       '{@.'
        BEQ     ZE9FF                    ;E9F2: 27 0B          ''.'
        LDAA    M00EC                    ;E9F4: 96 EC          '..'
        LDAB    M00DC                    ;E9F6: D6 DC          '..'
        STAB    M00DE                    ;E9F8: D7 DE          '..'
        ; Tremolo
        LDAB    #$5C                     ;E9FA: C6 5C          '.\'
        JSR     MIDI_SEND_CC                    ;E9FC: BD E7 49       '..I'
ZE9FF   LDAA    MIDI_SEND_B1                    ;E9FF: 96 EB          '..'
        ANDA    #$02                     ;EA01: 84 02          '..'
        BEQ     ZEA2B                    ;EA03: 27 26          ''&'
        ANDA    ,X                       ;EA05: A4 00          '..'
        BEQ     ZEA0B                    ;EA07: 27 02          ''.'
        LDAA    #$7F                     ;EA09: 86 7F          '..'
ZEA0B   STAA    M00EC                    ;EA0B: 97 EC          '..'
        TIM     #$20,M00D1               ;EA0D: 7B 20 D1       '{ .'
        BEQ     ZEA1B                    ;EA10: 27 09          ''.'
        LDAB    M00DD                    ;EA12: D6 DD          '..'
        STAB    M00DE                    ;EA14: D7 DE          '..'
        ; Chorus
        LDAB    #$5D                     ;EA16: C6 5D          '.]'
        JSR     MIDI_SEND_CC                    ;EA18: BD E7 49       '..I'
ZEA1B   TIM     #$40,M00D1               ;EA1B: 7B 40 D1       '{@.'
        BEQ     ZEA2B                    ;EA1E: 27 0B          ''.'
        LDAA    M00EC                    ;EA20: 96 EC          '..'
        LDAB    M00DC                    ;EA22: D6 DC          '..'
        STAB    M00DE                    ;EA24: D7 DE          '..'
        ; Chorus
        LDAB    #$5D                     ;EA26: C6 5D          '.]'
        JSR     MIDI_SEND_CC                    ;EA28: BD E7 49       '..I'
ZEA2B   RTS                              ;EA2B: 39             '9'

        ; Send initial parameters to CPU-B?
ZEA2C   LDAA    M009B                    ;EA2C: 96 9B          '..'
        BPL     ZEA58                    ;EA2E: 2A 28          '*('
        LDAA    M0095                    ;EA30: 96 95          '..'
        BEQ     ZEA58                    ;EA32: 27 24          ''$'
        TIM     #$20,M00D1               ;EA34: 7B 20 D1       '{ .'
        BEQ     ZEA46                    ;EA37: 27 0D          ''.'
        LDAA    CURRENT_PGM?                    ;EA39: 96 C3          '..'
        LDAB    #$C0                     ;EA3B: C6 C0          '..'
        ORAB    M00DD                    ;EA3D: DA DD          '..'
        STAB    MIDI_SEND_B2                    ;EA3F: D7 B1          '..'
        LDX     MIDIOUT_BUF_WRITE_POS                    ;EA41: DE 85          '..'
        JSR     MIDI_SEND_OTHER                    ;EA43: BD E7 6D       '..m'
ZEA46   TIM     #$40,M00D1               ;EA46: 7B 40 D1       '{@.'
        BEQ     ZEA58                    ;EA49: 27 0D          ''.'
        LDAA    CURRENT_PGM?                    ;EA4B: 96 C3          '..'
        LDAB    #$C0                     ;EA4D: C6 C0          '..'
        ORAB    M00DC                    ;EA4F: DA DC          '..'
        STAB    MIDI_SEND_B2                    ;EA51: D7 B1          '..'
        LDX     MIDIOUT_BUF_WRITE_POS                    ;EA53: DE 85          '..'
        JSR     MIDI_SEND_OTHER                    ;EA55: BD E7 6D       '..m'
ZEA58   LDAB    #$30                     ;EA58: C6 30          '.0'
        ORAB    CURRENT_PGM?                    ;EA5A: DA C3          '..'
        JSR     CPUBSEND_1                    ;EA5C: BD E5 EE       '...'
        LDX     #M0AC0                   ;EA5F: CE 0A C0       '...'
ZEA62   CLR     ,X                       ;EA62: 6F 00          'o.'
        INX                              ;EA64: 08             '.'
        CPX     #M0B40                   ;EA65: 8C 0B 40       '..@'
        BCS     ZEA62                    ;EA68: 25 F8          '%.'
        LDAB    M00A8                    ;EA6A: D6 A8          '..'
        BEQ     ZEA73                    ;EA6C: 27 05          ''.'
        LDAB    #$5F                     ;EA6E: C6 5F          '._'
        JSR     CPUBSEND_1                    ;EA70: BD E5 EE       '...'
ZEA73   CLR     >M009B                   ;EA73: 7F 00 9B       '...'
        LDAA    M0099                    ;EA76: 96 99          '..'
        BNE     ZEA97                    ;EA78: 26 1D          '&.'
        LDAB    CURRENT_PGM?                    ;EA7A: D6 C3          '..'
        JSR     ZEC61                    ;EA7C: BD EC 61       '..a'
        TBA                              ;EA7F: 17             '.'
        JSR     ZEC4A                    ;EA80: BD EC 4A       '..J'
        CLRA                             ;EA83: 4F             'O'
        ORAA    M009A                    ;EA84: 9A 9A          '..'
        ORAA    M00CF                    ;EA86: 9A CF          '..'
        ORAA    M00D1                    ;EA88: 9A D1          '..'
        LDX     #M00C5                   ;EA8A: CE 00 C5       '...'
        LDAB    CURRENT_PGM?                    ;EA8D: D6 C3          '..'
        ABX                              ;EA8F: 3A             ':'
        ORAA    ,X                       ;EA90: AA 00          '..'
        STAA    M00D2                    ;EA92: 97 D2          '..'
        JSR     ZEC33                    ;EA94: BD EC 33       '..3'
ZEA97   LDAB    SOFT_3                    ;EA97: D6 AB          '..'
        BEQ     ZEAA0                    ;EA99: 27 05          ''.'
        LDAB    #$7F                     ;EA9B: C6 7F          '..'
        JSR     CPUBSEND_1                    ;EA9D: BD E5 EE       '...'
ZEAA0   LDX     #M00C5                   ;EAA0: CE 00 C5       '...'
        LDAB    CURRENT_PGM?                    ;EAA3: D6 C3          '..'
        ABX                              ;EAA5: 3A             ':'
        LDAB    IC5_LATCH_STATE                    ;EAA6: D6 98          '..'
        ANDB    #$FC                     ;EAA8: C4 FC          '..'
        ORAB    ,X                       ;EAAA: EA 00          '..'
        STAB    IC5_LATCH_STATE                    ;EAAC: D7 98          '..'
        STAB    IC5_LATCH                    ;EAAE: F7 28 00       '.(.'
        RTS                              ;EAB1: 39             '9'

        ; SEL tuning?
ZEAB2   LDAA    IC5_LATCH_STATE                    ;EAB2: 96 98          '..'
        TAB                              ;EAB4: 16             '.'
        ORAA    #$08                     ;EAB5: 8A 08          '..'
        STAA    IC5_LATCH                    ;EAB7: B7 28 00       '.(.'
        ; read with sel=1
        LDAA    SWITCHES_LATCH                    ;EABA: B6 10 00       '...'
        STAB    IC5_LATCH                    ;EABD: F7 28 00       '.(.'
        ; read with sel=0 (lower bit)
        LDAB    SWITCHES_LATCH                    ;EAC0: F6 10 00       '...'
        ANDB    #$10                     ;EAC3: C4 10          '..'
        BEQ     ZEAC9                    ;EAC5: 27 02          ''.'
        LDAB    #$01                     ;EAC7: C6 01          '..'
ZEAC9   ANDA    #$F0                     ;EAC9: 84 F0          '..'
        LSRA                             ;EACB: 44             'D'
        LSRA                             ;EACC: 44             'D'
        LSRA                             ;EACD: 44             'D'
        ABA                              ;EACE: 1B             '.'
        TAB                              ;EACF: 16             '.'
        ; 5 bits of tuning in B, used as index for 0xEB00
        LDX     #MEB00                   ;EAD0: CE EB 00       '...'
        ABX                              ;EAD3: 3A             ':'
        LDAA    ,X                       ;EAD4: A6 00          '..'
        TAB                              ;EAD6: 16             '.'
        SUBA    LAST_TUNING                    ;EAD7: 90 CD          '..'
        CMPA    #$01                     ;EAD9: 81 01          '..'
        BGT     ZEAE2                    ;EADB: 2E 05          '..'
        CMPA    #$FF                     ;EADD: 81 FF          '..'
        BLT     ZEAE5                    ;EADF: 2D 04          '-.'
        RTS                              ;EAE1: 39             '9'
ZEAE2   DECB                             ;EAE2: 5A             'Z'
        BRA     ZEAE6                    ;EAE3: 20 01          ' .'
ZEAE5   INCB                             ;EAE5: 5C             '\'
ZEAE6   CLRA                             ;EAE6: 4F             'O'
        STAB    LAST_TUNING                    ;EAE7: D7 CD          '..'
        SUBB    #$0F                     ;EAE9: C0 0F          '..'
        BPL     ZEAEE                    ;EAEB: 2A 01          '*.'
        DECA                             ;EAED: 4A             'J'
ZEAEE   ASLD                             ;EAEE: 05             '.'
        ASLD                             ;EAEF: 05             '.'
        ASLD                             ;EAF0: 05             '.'
        LSRB                             ;EAF1: 54             'T'
        ANDA    #$7F                     ;EAF2: 84 7F          '..'
        STD     MIDI_SEND_B1                    ;EAF4: DD EB          '..'
        LDAB    #$E0                     ;EAF6: C6 E0          '..'
        JSR     ZE5BB                    ;EAF8: BD E5 BB       '...'
        LDD     MIDI_SEND_B1                    ;EAFB: DC EB          '..'
        JMP     ZE5EA                    ;EAFD: 7E E5 EA       '~..'

        ; data (tuning?)
        ; (((data - 0xf) <<ar 6) >>lg 1) & 0x7f
MEB00   ;EB00: 15
        ;EB01: 0A
        ;EB02: 1A
        ;EB03: 05
        ;EB04: 12
        ;EB05: 0D
        ;EB06: 1D
        ;EB07: 02
        ;EB08: 16
        ;EB09: 09
        ;EB0A: 19
        ;EB0B: 06
        ;EB0C: 11
        ;EB0D: 0E
        ;EB0E: 1E
        ;EB0F: 01
        ;EB10: 14
        ;EB11: 0B
        ;EB12: 1B
        ;EB13: 04
        ;EB14: 13
        ;EB15: 0C
        ;EB16: 1C
        ;EB17: 03
        ;EB18: 17
        ;EB19: 08
        ;EB1A: 18
        ;EB1B: 07
        ;EB1C: 10
        ;EB1D: 0F
        ;EB1E: 1F
        ;EB1F: 00

        ; Read upper buttons into full byte
ZEB20   LDAA    SWITCHES_STATE_3                    ;EB20: 96 B7          '..'
        ASLA                             ;EB22: 48             'H'
        ASLA                             ;EB23: 48             'H'
        ASLA                             ;EB24: 48             'H'
        ASLA                             ;EB25: 48             'H'
        LDAB    SWITCHES_STATE_2                    ;EB26: D6 B6          '..'
        ABA                              ;EB28: 1B             '.'
        STAA    M00EF                    ;EB29: 97 EF          '..'
        RTS                              ;EB2B: 39             '9'

ZEB2C   TAB                              ;EB2C: 16             '.'
        LDAA    M00E7                    ;EB2D: 96 E7          '..'
        STAB    M00E7                    ;EB2F: D7 E7          '..'
        EORA    M00E7                    ;EB31: 98 E7          '..'
        ANDA    M00E7                    ;EB33: 94 E7          '..'
        RTS                              ;EB35: 39             '9'

ZEB36   LDAB    M0099                    ;EB36: D6 99          '..'
        BNE     ZEBA8                    ;EB38: 26 6E          '&n'
        LDAB    M00EA                    ;EB3A: D6 EA          '..'
        BNE     ZEB64                    ;EB3C: 26 26          '&&'
        BSR     ZEB20                    ;EB3E: 8D E0          '..'
        LDAB    SWITCHES_LATCH                    ;EB40: F6 10 00       '...'
        COMB                             ;EB43: 53             'S'
        ANDB    #$40                     ;EB44: C4 40          '.@'
        BEQ     ZEB51                    ;EB46: 27 09          ''.'
        TST     >M00E8                   ;EB48: 7D 00 E8       '}..'
        BEQ     ZEB84                    ;EB4B: 27 37          ''7'
        STAB    M00E9                    ;EB4D: D7 E9          '..'
        ORAA    M00E8                    ;EB4F: 9A E8          '..'
ZEB51   BSR     ZEB2C                    ;EB51: 8D D9          '..'
        BEQ     ZEB84                    ;EB53: 27 2F          ''/'
        BITA    #$03                     ;EB55: 85 03          '..'
        BEQ     ZEB85                    ;EB57: 27 2C          '','
        ANDA    #$02                     ;EB59: 84 02          '..'
        BNE     ZEB5F                    ;EB5B: 26 02          '&.'
        LDAA    #$01                     ;EB5D: 86 01          '..'
ZEB5F   STAA    M00EA                    ;EB5F: 97 EA          '..'
        JSR     ZE9A7                    ;EB61: BD E9 A7       '...'
ZEB64   LDAA    M00E9                    ;EB64: 96 E9          '..'
        BNE     ZEB74                    ;EB66: 26 0C          '&.'
        LDAA    SWITCHES_LATCH                    ;EB68: B6 10 00       '...'
        COMA                             ;EB6B: 43             'C'
        ANDA    #$40                     ;EB6C: 84 40          '.@'
        BEQ     ZEB74                    ;EB6E: 27 04          ''.'
        LDAA    M00EA                    ;EB70: 96 EA          '..'
        STAA    M00E8                    ;EB72: 97 E8          '..'
ZEB74   BSR     ZEB20                    ;EB74: 8D AA          '..'
        BNE     ZEB84                    ;EB76: 26 0C          '&.'
        LDAA    SWITCHES_LATCH                    ;EB78: B6 10 00       '...'
        COMA                             ;EB7B: 43             'C'
        ANDA    #$40                     ;EB7C: 84 40          '.@'
        BNE     ZEB84                    ;EB7E: 26 04          '&.'
        STAA    M00EA                    ;EB80: 97 EA          '..'
        STAA    M00E9                    ;EB82: 97 E9          '..'
ZEB84   RTS                              ;EB84: 39             '9'

ZEB85   LDX     M00E3                    ;EB85: DE E3          '..'
        BNE     ZEB84                    ;EB87: 26 FB          '&.'
        LDX     M00E5                    ;EB89: DE E5          '..'
        BNE     ZEB84                    ;EB8B: 26 F7          '&.'
        ANDA    #$FC                     ;EB8D: 84 FC          '..'
        BNE     ZEB92                    ;EB8F: 26 01          '&.'
        RTS                              ;EB91: 39             '9'

ZEB92   CLC                              ;EB92: 0C             '.'
        CLRB                             ;EB93: 5F             '_'
        STAB    M00D3                    ;EB94: D7 D3          '..'
        STAB    M00D5                    ;EB96: D7 D5          '..'
ZEB98   INCB                             ;EB98: 5C             '\'
        ASLA                             ;EB99: 48             'H'
        BCC     ZEB98                    ;EB9A: 24 FC          '$.'
        STAB    M0099                    ;EB9C: D7 99          '..'
        LDX     #MEC0E                   ;EB9E: CE EC 0E       '...'
        DECB                             ;EBA1: 5A             'Z'
        ABX                              ;EBA2: 3A             ':'
        ABX                              ;EBA3: 3A             ':'
        LDX     ,X                       ;EBA4: EE 00          '..'
        JSR     ,X                       ;EBA6: AD 00          '..'
ZEBA8   LDAA    M00E9                    ;EBA8: 96 E9          '..'
        BNE     ZEBBC                    ;EBAA: 26 10          '&.'
        LDAA    SWITCHES_LATCH                    ;EBAC: B6 10 00       '...'
        COMA                             ;EBAF: 43             'C'
        ANDA    #$40                     ;EBB0: 84 40          '.@'
        BEQ     ZEBBC                    ;EBB2: 27 08          ''.'
        LDAB    M0099                    ;EBB4: D6 99          '..'
        DECB                             ;EBB6: 5A             'Z'
        JSR     ZEC61                    ;EBB7: BD EC 61       '..a'
        STAB    M00E8                    ;EBBA: D7 E8          '..'
ZEBBC   LDAB    M0099                    ;EBBC: D6 99          '..'
        LDX     #MEC1A                   ;EBBE: CE EC 1A       '...'
        DECB                             ;EBC1: 5A             'Z'
        ABX                              ;EBC2: 3A             ':'
        ABX                              ;EBC3: 3A             ':'
        LDX     ,X                       ;EBC4: EE 00          '..'
        JSR     ,X                       ;EBC6: AD 00          '..'
        JSR     ZEB20                    ;EBC8: BD EB 20       '.. '
        TSTA                             ;EBCB: 4D             'M'
        BNE     ZEC0D                    ;EBCC: 26 3F          '&?'
        LDAA    M00BE                    ;EBCE: 96 BE          '..'
        BNE     ZEC0D                    ;EBD0: 26 3B          '&;'
        LDAA    SWITCHES_LATCH                    ;EBD2: B6 10 00       '...'
        COMA                             ;EBD5: 43             'C'
        ANDA    #$40                     ;EBD6: 84 40          '.@'
        BNE     ZEC0D                    ;EBD8: 26 33          '&3'
        LDAB    M0099                    ;EBDA: D6 99          '..'
        LDX     #MEC26                   ;EBDC: CE EC 26       '..&'
        DECB                             ;EBDF: 5A             'Z'
        ABX                              ;EBE0: 3A             ':'
        ABX                              ;EBE1: 3A             ':'
        LDX     ,X                       ;EBE2: EE 00          '..'
        JSR     ,X                       ;EBE4: AD 00          '..'
        CLRA                             ;EBE6: 4F             'O'
        ORAA    M009A                    ;EBE7: 9A 9A          '..'
        ORAA    M00CF                    ;EBE9: 9A CF          '..'
        ORAA    M00D1                    ;EBEB: 9A D1          '..'
        LDX     #M00C5                   ;EBED: CE 00 C5       '...'
        LDAB    CURRENT_PGM?                    ;EBF0: D6 C3          '..'
        ABX                              ;EBF2: 3A             ':'
        ORAA    ,X                       ;EBF3: AA 00          '..'
        STAA    M00D2                    ;EBF5: 97 D2          '..'
        BSR     ZEC33                    ;EBF7: 8D 3A          '.:'
        LDAB    CURRENT_PGM?                    ;EBF9: D6 C3          '..'
        JSR     ZEC61                    ;EBFB: BD EC 61       '..a'
        TBA                              ;EBFE: 17             '.'
        JSR     ZEC4A                    ;EBFF: BD EC 4A       '..J'
        CLRA                             ;EC02: 4F             'O'
        STAA    M0099                    ;EC03: 97 99          '..'
        STAA    M00D4                    ;EC05: 97 D4          '..'
        STAA    M00D8                    ;EC07: 97 D8          '..'
        STAA    M00E9                    ;EC09: 97 E9          '..'
        STAA    M00D9                    ;EC0B: 97 D9          '..'
ZEC0D   RTS                              ;EC0D: 39             '9'

        ; data
MEC0E   ;EC0E: EC 74          '.t'
        ;EC10: EC CB          '..'
        ;EC12: ED 9A          '..'
        ;EC14: EE 69          '.i'
        ;EC16: EE D3          '..'
        ;EC18: EF 36          '.6'
MEC1A   ;EC1A: EC 79          '.y'
        ;EC1C: EC EC          '..'
        ;EC1E: ED BB          '..'
        ;EC20: EE 8C          '..'
        ;EC22: EE D8          '..'
        ;EC24: EF 3B          '.;'
MEC26   ;EC26: EC 32          '.2'
        ;EC28: EC 32          '.2'
        ;EC2A: EC 32          '.2'
        ;EC2C: EC 32          '.2'
        ;EC2E: EF 0D          '..'
        ;EC30: EF 44          '.D'
        RTS                              ;EC32: 39             '9'

ZEC33   PSHA                             ;EC33: 36             '6'
        LDAB    M00BA                    ;EC34: D6 BA          '..'
        ANDB    #$F0                     ;EC36: C4 F0          '..'
        ANDA    #$0F                     ;EC38: 84 0F          '..'
        ABA                              ;EC3A: 1B             '.'
        STAA    M00BA                    ;EC3B: 97 BA          '..'
        PULA                             ;EC3D: 32             '2'
        LDAB    LEDS_STATE_PTR_2                    ;EC3E: D6 BB          '..'
        ANDB    #$F0                     ;EC40: C4 F0          '..'
        LSRA                             ;EC42: 44             'D'
        LSRA                             ;EC43: 44             'D'
        LSRA                             ;EC44: 44             'D'
        LSRA                             ;EC45: 44             'D'
        ABA                              ;EC46: 1B             '.'
        STAA    LEDS_STATE_PTR_2                    ;EC47: 97 BB          '..'
        RTS                              ;EC49: 39             '9'

ZEC4A   PSHA                             ;EC4A: 36             '6'
        ANDA    #$0F                     ;EC4B: 84 0F          '..'
        LDAB    M00B9                    ;EC4D: D6 B9          '..'
        ANDB    #$F0                     ;EC4F: C4 F0          '..'
        ABA                              ;EC51: 1B             '.'
        STAA    M00B9                    ;EC52: 97 B9          '..'
        PULA                             ;EC54: 32             '2'
        LSRA                             ;EC55: 44             'D'
        LSRA                             ;EC56: 44             'D'
        LSRA                             ;EC57: 44             'D'
        LSRA                             ;EC58: 44             'D'
        LDAB    LEDS_STATE_PTR                    ;EC59: D6 B8          '..'
        ANDB    #$F0                     ;EC5B: C4 F0          '..'
        ABA                              ;EC5D: 1B             '.'
        STAA    LEDS_STATE_PTR                    ;EC5E: 97 B8          '..'
        RTS                              ;EC60: 39             '9'

ZEC61   LDAA    #$07                     ;EC61: 86 07          '..'
        SBA                              ;EC63: 10             '.'
        TAB                              ;EC64: 16             '.'
        LDX     #MEC6C                   ;EC65: CE EC 6C       '..l'
        ABX                              ;EC68: 3A             ':'
        LDAB    ,X                       ;EC69: E6 00          '..'
        RTS                              ;EC6B: 39             '9'

MEC6C   NOP                              ;EC6C: 01             '.'
        FCB     $02                      ;EC6D: 02             '.'
        LSRD                             ;EC6E: 04             '.'
        INX                              ;EC6F: 08             '.'
        SBA                              ;EC70: 10             '.'
        BRA     ZECB3                    ;EC71: 20 40          ' @'
        SUBA    #$86                     ;EC73: 80 86          '..'
        SUBA    #$97                     ;EC75: 80 97          '..'
        ANDB    M0039                    ;EC77: D4 39          '.9'
        JSR     ZEF94                    ;EC79: BD EF 94       '...'
        JSR     ZEB20                    ;EC7C: BD EB 20       '.. '
        JSR     ZEB2C                    ;EC7F: BD EB 2C       '..,'
        ANDA    #$60                     ;EC82: 84 60          '.`'
        BEQ     ZECCA                    ;EC84: 27 44          ''D'
        STAA    M00F0                    ;EC86: 97 F0          '..'
        LDAB    M00D1                    ;EC88: D6 D1          '..'
        STAA    M00D1                    ;EC8A: 97 D1          '..'
        EORB    M00D1                    ;EC8C: D8 D1          '..'
        STAB    M00D1                    ;EC8E: D7 D1          '..'
        LDAA    M00D2                    ;EC90: 96 D2          '..'
        ANDA    #$9F                     ;EC92: 84 9F          '..'
        ABA                              ;EC94: 1B             '.'
        STAA    M00D2                    ;EC95: 97 D2          '..'
        JSR     ZEC33                    ;EC97: BD EC 33       '..3'
        TIM     #$40,M00F0               ;EC9A: 7B 40 F0       '{@.'
        BEQ     ZECB2                    ;EC9D: 27 13          ''.'
        LDAB    M00DC                    ;EC9F: D6 DC          '..'
        STAB    M00DE                    ;ECA1: D7 DE          '..'
        TIM     #$40,M00D1               ;ECA3: 7B 40 D1       '{@.'
        BEQ     ZECAF                    ;ECA6: 27 07          ''.'
        LDAB    #$FF                     ;ECA8: C6 FF          '..'
        STAB    M00DA                    ;ECAA: D7 DA          '..'
        JMP     ZEF72                    ;ECAC: 7E EF 72       '~.r'
ZECAF   JMP     ZEF53                    ;ECAF: 7E EF 53       '~.S'
ZECB2   TIM     #$20,M00F0               ;ECB2: 7B 20 F0       '{ .'
        BEQ     ZECCA                    ;ECB5: 27 13          ''.'
        LDAB    M00DD                    ;ECB7: D6 DD          '..'
        STAB    M00DE                    ;ECB9: D7 DE          '..'
        TIM     #$20,M00D1               ;ECBB: 7B 20 D1       '{ .'
        BEQ     ZECC7                    ;ECBE: 27 07          ''.'
        LDAB    #$FF                     ;ECC0: C6 FF          '..'
        STAB    M00DB                    ;ECC2: D7 DB          '..'
        JMP     ZEF72                    ;ECC4: 7E EF 72       '~.r'
ZECC7   JMP     ZEF53                    ;ECC7: 7E EF 53       '~.S'
ZECCA   RTS                              ;ECCA: 39             '9'

ZECCB   LDAA    #$40                     ;ECCB: 86 40          '.@'
        STAA    M00D4                    ;ECCD: 97 D4          '..'
        LDAB    M00DC                    ;ECCF: D6 DC          '..'
        TBA                              ;ECD1: 17             '.'
        ANDA    #$08                     ;ECD2: 84 08          '..'
        STAA    M00D9                    ;ECD4: 97 D9          '..'
        ANDB    #$07                     ;ECD6: C4 07          '..'
        JSR     ZEC61                    ;ECD8: BD EC 61       '..a'
        TBA                              ;ECDB: 17             '.'
        STAA    M00D3                    ;ECDC: 97 D3          '..'
        STAA    M00D5                    ;ECDE: 97 D5          '..'
        LDAA    M00D2                    ;ECE0: 96 D2          '..'
        ANDA    #$FC                     ;ECE2: 84 FC          '..'
        ORAA    M00DF                    ;ECE4: 9A DF          '..'
        STAA    M00D2                    ;ECE6: 97 D2          '..'
        JSR     ZEC33                    ;ECE8: BD EC 33       '..3'
        RTS                              ;ECEB: 39             '9'

        TIM     #$40,M00D1               ;ECEC: 7B 40 D1       '{@.'
        BEQ     ZED36                    ;ECEF: 27 45          ''E'
        JSR     ZEB20                    ;ECF1: BD EB 20       '.. '
        JSR     ZEB2C                    ;ECF4: BD EB 2C       '..,'
        ANDA    #$03                     ;ECF7: 84 03          '..'
        BEQ     ZED36                    ;ECF9: 27 3B          '';'
        STAA    M00F0                    ;ECFB: 97 F0          '..'
        LDAB    M00DF                    ;ECFD: D6 DF          '..'
        STAA    M00DF                    ;ECFF: 97 DF          '..'
        EORB    M00DF                    ;ED01: D8 DF          '..'
        STAB    M00DF                    ;ED03: D7 DF          '..'
        LDAB    M00DC                    ;ED05: D6 DC          '..'
        STAB    M00DE                    ;ED07: D7 DE          '..'
        LDAA    M00F0                    ;ED09: 96 F0          '..'
        ANDA    #$02                     ;ED0B: 84 02          '..'
        BEQ     ZED1A                    ;ED0D: 27 0B          ''.'
        ANDA    M00DF                    ;ED0F: 94 DF          '..'
        BEQ     ZED15                    ;ED11: 27 02          ''.'
        LDAA    #$7F                     ;ED13: 86 7F          '..'
        ; Chorus
ZED15   LDAB    #$5D                     ;ED15: C6 5D          '.]'
        JSR     MIDI_SEND_CC                    ;ED17: BD E7 49       '..I'
ZED1A   LDAA    M00F0                    ;ED1A: 96 F0          '..'
        ANDA    #$01                     ;ED1C: 84 01          '..'
        BEQ     ZED2B                    ;ED1E: 27 0B          ''.'
        ANDA    M00DF                    ;ED20: 94 DF          '..'
        BEQ     ZED26                    ;ED22: 27 02          ''.'
        LDAA    #$7F                     ;ED24: 86 7F          '..'
        ; Tremolo
ZED26   LDAB    #$5C                     ;ED26: C6 5C          '.\'
        JSR     MIDI_SEND_CC                    ;ED28: BD E7 49       '..I'
ZED2B   LDAA    M00D2                    ;ED2B: 96 D2          '..'
        ANDA    #$FC                     ;ED2D: 84 FC          '..'
        ORAA    M00DF                    ;ED2F: 9A DF          '..'
        STAA    M00D2                    ;ED31: 97 D2          '..'
        JSR     ZEC33                    ;ED33: BD EC 33       '..3'
ZED36   JSR     ZEF94                    ;ED36: BD EF 94       '...'
        CMPB    #$10                     ;ED39: C1 10          '..'
        BCS     ZED61                    ;ED3B: 25 24          '%$'
        TIM     #$02,KEY_MODEL_MODE               ;ED3D: 7B 02 C0       '{..'
        BEQ     ZED44                    ;ED40: 27 02          ''.'
        SUBB    #$05                     ;ED42: C0 05          '..'
ZED44   CMPB    #$14                     ;ED44: C1 14          '..'
        BCS     ZED60                    ;ED46: 25 18          '%.'
        CMPB    #$27                     ;ED48: C1 27          '.''
        BCC     ZED60                    ;ED4A: 24 14          '$.'
        SUBB    #$14                     ;ED4C: C0 14          '..'
        TIM     #$40,M00D1               ;ED4E: 7B 40 D1       '{@.'
        BEQ     ZED5F                    ;ED51: 27 0C          ''.'
        LDX     #M00E1                   ;ED53: CE 00 E1       '...'
        STX     MIDI_SEND_B1                    ;ED56: DF EB          '..'
        LDAA    M00DC                    ;ED58: 96 DC          '..'
        STAA    M00ED                    ;ED5A: 97 ED          '..'
        JSR     ZF047                    ;ED5C: BD F0 47       '..G'
ZED5F   RTS                              ;ED5F: 39             '9'

ZED60   RTS                              ;ED60: 39             '9'

ZED61   CMPB    M00DD                    ;ED61: D1 DD          '..'
        BEQ     ZED60                    ;ED63: 27 FB          ''.'
        CMPB    M00DC                    ;ED65: D1 DC          '..'
        BEQ     ZED60                    ;ED67: 27 F7          ''.'
        TIM     #$40,M00D1               ;ED69: 7B 40 D1       '{@.'
        BEQ     ZED77                    ;ED6C: 27 09          ''.'
        PSHB                             ;ED6E: 37             '7'
        LDAB    M00DC                    ;ED6F: D6 DC          '..'
        STAB    M00DE                    ;ED71: D7 DE          '..'
        JSR     ZEF53                    ;ED73: BD EF 53       '..S'
        PULB                             ;ED76: 33             '3'
ZED77   STAB    M00DC                    ;ED77: D7 DC          '..'
        STAB    M00DE                    ;ED79: D7 DE          '..'
        CLRA                             ;ED7B: 4F             'O'
        LDAB    #$7C                     ;ED7C: C6 7C          '.|'
        JSR     MIDI_SEND_CC                    ;ED7E: BD E7 49       '..I'
        CLRA                             ;ED81: 4F             'O'
        LDAB    #$7F                     ;ED82: C6 7F          '..'
        JSR     MIDI_SEND_CC                    ;ED84: BD E7 49       '..I'
        TIM     #$40,M00D1               ;ED87: 7B 40 D1       '{@.'
        BEQ     ZED93                    ;ED8A: 27 07          ''.'
        LDAB    #$FF                     ;ED8C: C6 FF          '..'
        STAB    M00DA                    ;ED8E: D7 DA          '..'
        JSR     ZEF72                    ;ED90: BD EF 72       '..r'
ZED93   CLR     >M00DF                   ;ED93: 7F 00 DF       '...'
        JSR     ZECCB                    ;ED96: BD EC CB       '...'
        RTS                              ;ED99: 39             '9'

ZED9A   LDAA    #$20                     ;ED9A: 86 20          '. '
        STAA    M00D4                    ;ED9C: 97 D4          '..'
        LDAB    M00DD                    ;ED9E: D6 DD          '..'
        TBA                              ;EDA0: 17             '.'
        ANDA    #$08                     ;EDA1: 84 08          '..'
        STAA    M00D9                    ;EDA3: 97 D9          '..'
        ANDB    #$07                     ;EDA5: C4 07          '..'
        JSR     ZEC61                    ;EDA7: BD EC 61       '..a'
        TBA                              ;EDAA: 17             '.'
        STAA    M00D3                    ;EDAB: 97 D3          '..'
        STAA    M00D5                    ;EDAD: 97 D5          '..'
        LDAA    M00D2                    ;EDAF: 96 D2          '..'
        ANDA    #$FC                     ;EDB1: 84 FC          '..'
        ORAA    M00E0                    ;EDB3: 9A E0          '..'
        STAA    M00D2                    ;EDB5: 97 D2          '..'
        JSR     ZEC33                    ;EDB7: BD EC 33       '..3'
        RTS                              ;EDBA: 39             '9'

        TIM     #$20,M00D1               ;EDBB: 7B 20 D1       '{ .'
        BEQ     ZEE05                    ;EDBE: 27 45          ''E'
        JSR     ZEB20                    ;EDC0: BD EB 20       '.. '
        JSR     ZEB2C                    ;EDC3: BD EB 2C       '..,'
        ANDA    #$03                     ;EDC6: 84 03          '..'
        BEQ     ZEE05                    ;EDC8: 27 3B          '';'
        STAA    M00F0                    ;EDCA: 97 F0          '..'
        LDAB    M00E0                    ;EDCC: D6 E0          '..'
        STAA    M00E0                    ;EDCE: 97 E0          '..'
        EORB    M00E0                    ;EDD0: D8 E0          '..'
        STAB    M00E0                    ;EDD2: D7 E0          '..'
        LDAB    M00DD                    ;EDD4: D6 DD          '..'
        STAB    M00DE                    ;EDD6: D7 DE          '..'
        LDAA    M00F0                    ;EDD8: 96 F0          '..'
        ANDA    #$02                     ;EDDA: 84 02          '..'
        BEQ     ZEDE9                    ;EDDC: 27 0B          ''.'
        ANDA    M00E0                    ;EDDE: 94 E0          '..'
        BEQ     ZEDE4                    ;EDE0: 27 02          ''.'
        LDAA    #$7F                     ;EDE2: 86 7F          '..'
        ; Chorus
ZEDE4   LDAB    #$5D                     ;EDE4: C6 5D          '.]'
        JSR     MIDI_SEND_CC                    ;EDE6: BD E7 49       '..I'
ZEDE9   LDAA    M00F0                    ;EDE9: 96 F0          '..'
        ANDA    #$01                     ;EDEB: 84 01          '..'
        BEQ     ZEDFA                    ;EDED: 27 0B          ''.'
        ANDA    M00E0                    ;EDEF: 94 E0          '..'
        BEQ     ZEDF5                    ;EDF1: 27 02          ''.'
        LDAA    #$7F                     ;EDF3: 86 7F          '..'
        ; Tremolo
ZEDF5   LDAB    #$5C                     ;EDF5: C6 5C          '.\'
        JSR     MIDI_SEND_CC                    ;EDF7: BD E7 49       '..I'
ZEDFA   LDAA    M00D2                    ;EDFA: 96 D2          '..'
        ANDA    #$FC                     ;EDFC: 84 FC          '..'
        ORAA    M00E0                    ;EDFE: 9A E0          '..'
        STAA    M00D2                    ;EE00: 97 D2          '..'
        JSR     ZEC33                    ;EE02: BD EC 33       '..3'
ZEE05   JSR     ZEF94                    ;EE05: BD EF 94       '...'
        CMPB    #$10                     ;EE08: C1 10          '..'
        BCS     ZEE30                    ;EE0A: 25 24          '%$'
        TIM     #$02,KEY_MODEL_MODE               ;EE0C: 7B 02 C0       '{..'
        BEQ     ZEE13                    ;EE0F: 27 02          ''.'
        SUBB    #$05                     ;EE11: C0 05          '..'
ZEE13   CMPB    #$14                     ;EE13: C1 14          '..'
        BCS     ZEE2F                    ;EE15: 25 18          '%.'
        CMPB    #$27                     ;EE17: C1 27          '.''
        BCC     ZEE2F                    ;EE19: 24 14          '$.'
        SUBB    #$14                     ;EE1B: C0 14          '..'
        TIM     #$20,M00D1               ;EE1D: 7B 20 D1       '{ .'
        BEQ     ZEE2E                    ;EE20: 27 0C          ''.'
        LDX     #M00E2                   ;EE22: CE 00 E2       '...'
        STX     MIDI_SEND_B1                    ;EE25: DF EB          '..'
        LDAA    M00DD                    ;EE27: 96 DD          '..'
        STAA    M00ED                    ;EE29: 97 ED          '..'
        JSR     ZF047                    ;EE2B: BD F0 47       '..G'
ZEE2E   RTS                              ;EE2E: 39             '9'

ZEE2F   RTS                              ;EE2F: 39             '9'

ZEE30   CMPB    M00DC                    ;EE30: D1 DC          '..'
        BEQ     ZEE2F                    ;EE32: 27 FB          ''.'
        CMPB    M00DD                    ;EE34: D1 DD          '..'
        BEQ     ZEE2F                    ;EE36: 27 F7          ''.'
        TIM     #$20,M00D1               ;EE38: 7B 20 D1       '{ .'
        BEQ     ZEE46                    ;EE3B: 27 09          ''.'
        PSHB                             ;EE3D: 37             '7'
        LDAB    M00DD                    ;EE3E: D6 DD          '..'
        STAB    M00DE                    ;EE40: D7 DE          '..'
        JSR     ZEF53                    ;EE42: BD EF 53       '..S'
        PULB                             ;EE45: 33             '3'
ZEE46   STAB    M00DD                    ;EE46: D7 DD          '..'
        STAB    M00DE                    ;EE48: D7 DE          '..'
        CLRA                             ;EE4A: 4F             'O'
        ; Omni mode off
        LDAB    #$7C                     ;EE4B: C6 7C          '.|'
        JSR     MIDI_SEND_CC                    ;EE4D: BD E7 49       '..I'
        CLRA                             ;EE50: 4F             'O'
        ; Poly mode
        LDAB    #$7F                     ;EE51: C6 7F          '..'
        JSR     MIDI_SEND_CC                    ;EE53: BD E7 49       '..I'
        TIM     #$20,M00D1               ;EE56: 7B 20 D1       '{ .'
        BEQ     ZEE62                    ;EE59: 27 07          ''.'
        LDAB    #$FF                     ;EE5B: C6 FF          '..'
        STAB    M00DB                    ;EE5D: D7 DB          '..'
        JSR     ZEF72                    ;EE5F: BD EF 72       '..r'
ZEE62   CLR     >M00E0                   ;EE62: 7F 00 E0       '...'
        JSR     ZED9A                    ;EE65: BD ED 9A       '...'
        RTS                              ;EE68: 39             '9'

ZEE69   LDAA    #$10                     ;EE69: 86 10          '..'
        STAA    M00D4                    ;EE6B: 97 D4          '..'
        LDAB    M0080                    ;EE6D: D6 80          '..'
        TBA                              ;EE6F: 17             '.'
        ANDA    #$08                     ;EE70: 84 08          '..'
        STAA    M00D9                    ;EE72: 97 D9          '..'
        ANDB    #$07                     ;EE74: C4 07          '..'
        JSR     ZEC61                    ;EE76: BD EC 61       '..a'
        TBA                              ;EE79: 17             '.'
        STAA    M00D3                    ;EE7A: 97 D3          '..'
        STAA    M00D5                    ;EE7C: 97 D5          '..'
        LDAA    M00D2                    ;EE7E: 96 D2          '..'
        ANDA    #$9F                     ;EE80: 84 9F          '..'
        ORAA    M00D0                    ;EE82: 9A D0          '..'
        ORAA    M00D4                    ;EE84: 9A D4          '..'
        STAA    M00D2                    ;EE86: 97 D2          '..'
        JSR     ZEC33                    ;EE88: BD EC 33       '..3'
        RTS                              ;EE8B: 39             '9'

        JSR     ZEB20                    ;EE8C: BD EB 20       '.. '
        JSR     ZEB2C                    ;EE8F: BD EB 2C       '..,'
        ANDA    #$60                     ;EE92: 84 60          '.`'
        BEQ     ZEEA8                    ;EE94: 27 12          ''.'
        LDAB    M00D0                    ;EE96: D6 D0          '..'
        STAA    M00D0                    ;EE98: 97 D0          '..'
        EORB    M00D0                    ;EE9A: D8 D0          '..'
        STAB    M00D0                    ;EE9C: D7 D0          '..'
        LDAA    M00D2                    ;EE9E: 96 D2          '..'
        ANDA    #$9F                     ;EEA0: 84 9F          '..'
        ABA                              ;EEA2: 1B             '.'
        STAA    M00D2                    ;EEA3: 97 D2          '..'
        JSR     ZEC33                    ;EEA5: BD EC 33       '..3'
ZEEA8   JSR     ZEF94                    ;EEA8: BD EF 94       '...'
        TSTB                             ;EEAB: 5D             ']'
        BMI     ZEEB2                    ;EEAC: 2B 04          '+.'
        CMPB    #$10                     ;EEAE: C1 10          '..'
        BCS     ZEEB3                    ;EEB0: 25 01          '%.'
ZEEB2   RTS                              ;EEB2: 39             '9'

ZEEB3   TST     >M009F                   ;EEB3: 7D 00 9F       '}..'
        BNE     ZEEBC                    ;EEB6: 26 04          '&.'
        CMPB    M0080                    ;EEB8: D1 80          '..'
        BEQ     ZEEB2                    ;EEBA: 27 F6          ''.'
ZEEBC   SEI                              ;EEBC: 0F             '.'
        STAB    M0080                    ;EEBD: D7 80          '..'
        CLRA                             ;EEBF: 4F             'O'
        STAA    M009F                    ;EEC0: 97 9F          '..'
        STAA    M00A7                    ;EEC2: 97 A7          '..'
        STAA    SOFT_2                    ;EEC4: 97 AA          '..'
        STAA    M00AD                    ;EEC6: 97 AD          '..'
        STAA    M00A1                    ;EEC8: 97 A1          '..'
        STAA    M00A2                    ;EECA: 97 A2          '..'
        CLI                              ;EECC: 0E             '.'
        JSR     ZE63A                    ;EECD: BD E6 3A       '..:'
        BSR     ZEE69                    ;EED0: 8D 97          '..'
        RTS                              ;EED2: 39             '9'

        LDAA    #$08                     ;EED3: 86 08          '..'
        STAA    M00D4                    ;EED5: 97 D4          '..'
        RTS                              ;EED7: 39             '9'

        JSR     ZEF94                    ;EED8: BD EF 94       '...'
        CMPB    #$FF                     ;EEDB: C1 FF          '..'
        BEQ     ZEEFC                    ;EEDD: 27 1D          ''.'
        TIM     #$02,KEY_MODEL_MODE               ;EEDF: 7B 02 C0       '{..'
        BEQ     ZEEE6                    ;EEE2: 27 02          ''.'
        ADDB    #$13                     ;EEE4: CB 13          '..'
ZEEE6   CMPB    #$45                     ;EEE6: C1 45          '.E'
        BCS     ZEEFD                    ;EEE8: 25 13          '%.'
        CMPB    #$51                     ;EEEA: C1 51          '.Q'
        BCC     ZEEFD                    ;EEEC: 24 0F          '$.'
        SUBB    #$45                     ;EEEE: C0 45          '.E'
        LDX     #MEF01                   ;EEF0: CE EF 01       '...'
        ABX                              ;EEF3: 3A             ':'
        LDAA    ,X                       ;EEF4: A6 00          '..'
        STAA    M00BF                    ;EEF6: 97 BF          '..'
        ADDA    M00BD                    ;EEF8: 9B BD          '..'
        STAA    M00AF                    ;EEFA: 97 AF          '..'
ZEEFC   RTS                              ;EEFC: 39             '9'

ZEEFD   CLR     >M00D8                   ;EEFD: 7F 00 D8       '...'
        RTS                              ;EF00: 39             '9'

MEF01   SEI                              ;EF01: 0F             '.'
        SBA                              ;EF02: 10             '.'
        CBA                              ;EF03: 11             '.'
        FCB     $12                      ;EF04: 12             '.'
        FCB     $13                      ;EF05: 13             '.'
        FCB     $14                      ;EF06: 14             '.'
        FCB     $15                      ;EF07: 15             '.'
        TAB                              ;EF08: 16             '.'
        TBA                              ;EF09: 17             '.'
        XGDX                             ;EF0A: 18             '.'
        DAA                              ;EF0B: 19             '.'
        SLP                              ;EF0C: 1A             '.'
        LDAA    M00BF                    ;EF0D: 96 BF          '..'
        CMPA    #$15                     ;EF0F: 81 15          '..'
        BEQ     ZEF2D                    ;EF11: 27 1A          ''.'
        LDAA    M00D8                    ;EF13: 96 D8          '..'
        BNE     ZEF31                    ;EF15: 26 1A          '&.'
        LDAA    #$08                     ;EF17: 86 08          '..'
        EORA    M009A                    ;EF19: 98 9A          '..'
        STAA    M009A                    ;EF1B: 97 9A          '..'
        BNE     ZEF26                    ;EF1D: 26 07          '&.'
        LDAA    #$15                     ;EF1F: 86 15          '..'
        ADDA    M00BD                    ;EF21: 9B BD          '..'
        STAA    M00AF                    ;EF23: 97 AF          '..'
        RTS                              ;EF25: 39             '9'

ZEF26   LDAA    M00BF                    ;EF26: 96 BF          '..'
        ADDA    M00BD                    ;EF28: 9B BD          '..'
        STAA    M00AF                    ;EF2A: 97 AF          '..'
        RTS                              ;EF2C: 39             '9'

ZEF2D   CLR     >M009A                   ;EF2D: 7F 00 9A       '...'
        RTS                              ;EF30: 39             '9'

ZEF31   OIM     #$08,M009A               ;EF31: 72 08 9A       'r..'
        BRA     ZEF26                    ;EF34: 20 F0          ' .'
        LDAA    #$04                     ;EF36: 86 04          '..'
        STAA    M00D4                    ;EF38: 97 D4          '..'
        RTS                              ;EF3A: 39             '9'

        JSR     ZEF94                    ;EF3B: BD EF 94       '...'
        TSTB                             ;EF3E: 5D             ']'
        BMI     ZEF43                    ;EF3F: 2B 02          '+.'
        STAB    M00CE                    ;EF41: D7 CE          '..'
ZEF43   RTS                              ;EF43: 39             '9'

        LDAA    M00D8                    ;EF44: 96 D8          '..'
        BNE     ZEF4F                    ;EF46: 26 07          '&.'
        LDAA    #$04                     ;EF48: 86 04          '..'
        EORA    M00CF                    ;EF4A: 98 CF          '..'
        STAA    M00CF                    ;EF4C: 97 CF          '..'
        RTS                              ;EF4E: 39             '9'

ZEF4F   OIM     #$04,M00CF               ;EF4F: 72 04 CF       'r..'
        RTS                              ;EF52: 39             '9'

ZEF53   LDAA    M00A6                    ;EF53: 96 A6          '..'
        BEQ     ZEF5D                    ;EF55: 27 06          ''.'
        CLRA                             ;EF57: 4F             'O'
        ; Sustain
        LDAB    #$40                     ;EF58: C6 40          '.@'
        JSR     MIDI_SEND_CC                    ;EF5A: BD E7 49       '..I'
ZEF5D   LDAA    SOFT_1                    ;EF5D: 96 A9          '..'
        BEQ     ZEF67                    ;EF5F: 27 06          ''.'
        CLRA                             ;EF61: 4F             'O'
        ; Soft
        LDAB    #$43                     ;EF62: C6 43          '.C'
        JSR     MIDI_SEND_CC                    ;EF64: BD E7 49       '..I'
ZEF67   LDAA    M00AC                    ;EF67: 96 AC          '..'
        BEQ     ZEF71                    ;EF69: 27 06          ''.'
        CLRA                             ;EF6B: 4F             'O'
        ; Sostenuto
        LDAB    #$42                     ;EF6C: C6 42          '.B'
        JSR     MIDI_SEND_CC                    ;EF6E: BD E7 49       '..I'
ZEF71   RTS                              ;EF71: 39             '9'

ZEF72   LDAA    M00A6                    ;EF72: 96 A6          '..'
        BEQ     ZEF7D                    ;EF74: 27 07          ''.'
        LDAA    #$7F                     ;EF76: 86 7F          '..'
        LDAB    #$40                     ;EF78: C6 40          '.@'
        JSR     MIDI_SEND_CC                    ;EF7A: BD E7 49       '..I'
ZEF7D   LDAA    SOFT_1                    ;EF7D: 96 A9          '..'
        BEQ     ZEF88                    ;EF7F: 27 07          ''.'
        LDAA    #$7F                     ;EF81: 86 7F          '..'
        ; Soft
        LDAB    #$43                     ;EF83: C6 43          '.C'
        JSR     MIDI_SEND_CC                    ;EF85: BD E7 49       '..I'
ZEF88   LDAA    M00AC                    ;EF88: 96 AC          '..'
        BEQ     ZEF93                    ;EF8A: 27 07          ''.'
        LDAA    #$7F                     ;EF8C: 86 7F          '..'
        ; Sostenuto
        LDAB    #$42                     ;EF8E: C6 42          '.B'
        JSR     MIDI_SEND_CC                    ;EF90: BD E7 49       '..I'
ZEF93   RTS                              ;EF93: 39             '9'

ZEF94   LDX     #M0A00                   ;EF94: CE 0A 00       '...'
ZEF97   LDAA    ,X                       ;EF97: A6 00          '..'
        CMPA    $58,X                    ;EF99: A1 58          '.X'
        BEQ     ZEFAC                    ;EF9B: 27 0F          ''.'
        LDAB    $58,X                    ;EF9D: E6 58          '.X'
        BNE     ZEFA5                    ;EF9F: 26 04          '&.'
        STAA    $58,X                    ;EFA1: A7 58          '.X'
        BRA     ZEFB5                    ;EFA3: 20 10          ' .'
ZEFA5   DEC     >M00BE                   ;EFA5: 7A 00 BE       'z..'
        STAA    $58,X                    ;EFA8: A7 58          '.X'
        BNE     ZEFB5                    ;EFAA: 26 09          '&.'
ZEFAC   INX                              ;EFAC: 08             '.'
        CPX     #M0A58                   ;EFAD: 8C 0A 58       '..X'
        BCS     ZEF97                    ;EFB0: 25 E5          '%.'
        LDAB    #$FF                     ;EFB2: C6 FF          '..'
        RTS                              ;EFB4: 39             '9'

ZEFB5   INC     >M00BE                   ;EFB5: 7C 00 BE       '|..'
        OIM     #$80,M00D8               ;EFB8: 72 80 D8       'r..'
        XGDX                             ;EFBB: 18             '.'
        LDAA    KEY_MODEL_MODE                    ;EFBC: 96 C0          '..'
        BITA    #$02                     ;EFBE: 85 02          '..'
        BEQ     ZEFC8                    ;EFC0: 27 06          ''.'
        BITA    #$01                     ;EFC2: 85 01          '..'
        BNE     ZEFC8                    ;EFC4: 26 02          '&.'
        SUBB    #$04                     ;EFC6: C0 04          '..'
ZEFC8   RTS                              ;EFC8: 39             '9'

ZEFC9   LDAA    M0099                    ;EFC9: 96 99          '..'
        BEQ     ZF005                    ;EFCB: 27 38          ''8'
        LDAA    M00A0                    ;EFCD: 96 A0          '..'
        CMPA    #$03                     ;EFCF: 81 03          '..'
        BCS     ZEFDA                    ;EFD1: 25 07          '%.'
        CMPA    #$06                     ;EFD3: 81 06          '..'
        BCS     ZEFEC                    ;EFD5: 25 15          '%.'
        CLR     >M00A0                   ;EFD7: 7F 00 A0       '...'
ZEFDA   LDAA    M00D4                    ;EFDA: 96 D4          '..'
        ORAA    M00D2                    ;EFDC: 9A D2          '..'
        STAA    M00D2                    ;EFDE: 97 D2          '..'
        LDAA    M00D5                    ;EFE0: 96 D5          '..'
        BEQ     ZF000                    ;EFE2: 27 1C          ''.'
        LDAB    M00D9                    ;EFE4: D6 D9          '..'
        BEQ     ZEFFD                    ;EFE6: 27 15          ''.'
        LDAA    #$FF                     ;EFE8: 86 FF          '..'
        BRA     ZEFFD                    ;EFEA: 20 11          ' .'
ZEFEC   LDAA    M00D4                    ;EFEC: 96 D4          '..'
        COMA                             ;EFEE: 43             'C'
        ANDA    M00D2                    ;EFEF: 94 D2          '..'
        STAA    M00D2                    ;EFF1: 97 D2          '..'
        LDAA    M00D5                    ;EFF3: 96 D5          '..'
        BEQ     ZF000                    ;EFF5: 27 09          ''.'
        COMA                             ;EFF7: 43             'C'
        LDAB    M00D9                    ;EFF8: D6 D9          '..'
        BNE     ZEFFD                    ;EFFA: 26 01          '&.'
        CLRA                             ;EFFC: 4F             'O'
ZEFFD   JSR     ZEC4A                    ;EFFD: BD EC 4A       '..J'
ZF000   LDAA    M00D2                    ;F000: 96 D2          '..'
        JSR     ZEC33                    ;F002: BD EC 33       '..3'
ZF005   RTS                              ;F005: 39             '9'

ZF006   LDAA    M0099                    ;F006: 96 99          '..'
        BNE     ZF046                    ;F008: 26 3C          '&<'
        LDAA    M009B                    ;F00A: 96 9B          '..'
        BEQ     ZF046                    ;F00C: 27 38          ''8'
        LDAA    M00A0                    ;F00E: 96 A0          '..'
        CMPA    #$03                     ;F010: 81 03          '..'
        BCS     ZF01B                    ;F012: 25 07          '%.'
        CMPA    #$06                     ;F014: 81 06          '..'
        BCS     ZF02D                    ;F016: 25 15          '%.'
        CLR     >M00A0                   ;F018: 7F 00 A0       '...'
ZF01B   LDAA    M00D6                    ;F01B: 96 D6          '..'
        ORAA    M00D2                    ;F01D: 9A D2          '..'
        STAA    M00D2                    ;F01F: 97 D2          '..'
        LDAA    M00D7                    ;F021: 96 D7          '..'
        BEQ     ZF041                    ;F023: 27 1C          ''.'
        LDAB    M00D9                    ;F025: D6 D9          '..'
        BEQ     ZF03E                    ;F027: 27 15          ''.'
        LDAA    #$FF                     ;F029: 86 FF          '..'
        BRA     ZF03E                    ;F02B: 20 11          ' .'
ZF02D   LDAA    M00D6                    ;F02D: 96 D6          '..'
        COMA                             ;F02F: 43             'C'
        ANDA    M00D2                    ;F030: 94 D2          '..'
        STAA    M00D2                    ;F032: 97 D2          '..'
        LDAA    M00D7                    ;F034: 96 D7          '..'
        BEQ     ZF041                    ;F036: 27 09          ''.'
        COMA                             ;F038: 43             'C'
        LDAB    M00D9                    ;F039: D6 D9          '..'
        BNE     ZF03E                    ;F03B: 26 01          '&.'
        CLRA                             ;F03D: 4F             'O'
ZF03E   JSR     ZEC4A                    ;F03E: BD EC 4A       '..J'
ZF041   LDAA    M00D2                    ;F041: 96 D2          '..'
        JSR     ZEC33                    ;F043: BD EC 33       '..3'
ZF046   RTS                              ;F046: 39             '9'

ZF047   CMPB    #$0E                     ;F047: C1 0E          '..'
        BEQ     ZF074                    ;F049: 27 29          '')'
        LDX     #MF086                   ;F04B: CE F0 86       '...'
        ABX                              ;F04E: 3A             ':'
        LDAA    ,X                       ;F04F: A6 00          '..'
        TAB                              ;F051: 16             '.'
        LDX     MIDI_SEND_B1                    ;F052: DE EB          '..'
        ANDB    #$07                     ;F054: C4 07          '..'
        ANDA    #$F0                     ;F056: 84 F0          '..'
        BEQ     ZF075                    ;F058: 27 1B          ''.'
        BPL     ZF07C                    ;F05A: 2A 20          '* '
        LDAA    ,X                       ;F05C: A6 00          '..'
        TSTB                             ;F05E: 5D             ']'
        BEQ     ZF065                    ;F05F: 27 04          ''.'
        ORAA    #$40                     ;F061: 8A 40          '.@'
        BRA     ZF067                    ;F063: 20 02          ' .'
ZF065   ANDA    #$3F                     ;F065: 84 3F          '.?'
ZF067   STAA    ,X                       ;F067: A7 00          '..'
        LDAB    #$C0                     ;F069: C6 C0          '..'
        ORAB    M00ED                    ;F06B: DA ED          '..'
        STAB    MIDI_SEND_B2                    ;F06D: D7 B1          '..'
        LDX     MIDIOUT_BUF_WRITE_POS                    ;F06F: DE 85          '..'
        JSR     MIDI_SEND_OTHER                    ;F071: BD E7 6D       '..m'
ZF074   RTS                              ;F074: 39             '9'

ZF075   LDAA    ,X                       ;F075: A6 00          '..'
        ANDA    #$78                     ;F077: 84 78          '.x'
        ABA                              ;F079: 1B             '.'
        BRA     ZF067                    ;F07A: 20 EB          ' .'

ZF07C   LDAA    ,X                       ;F07C: A6 00          '..'
        ANDA    #$47                     ;F07E: 84 47          '.G'
        ASLB                             ;F080: 58             'X'
        ASLB                             ;F081: 58             'X'
        ASLB                             ;F082: 58             'X'
        ABA                              ;F083: 1B             '.'
        BRA     ZF067                    ;F084: 20 E1          ' .'

        ; data
MF086   FCB     $00                      ;F086: 00             '.'
        SBA                              ;F087: 10             '.'
        NOP                              ;F088: 01             '.'
        CBA                              ;F089: 11             '.'
        FCB     $02                      ;F08A: 02             '.'
        FCB     $12                      ;F08B: 12             '.'
        FCB     $03                      ;F08C: 03             '.'
        LSRD                             ;F08D: 04             '.'
        FCB     $13                      ;F08E: 13             '.'
        ASLD                             ;F08F: 05             '.'
        FCB     $14                      ;F090: 14             '.'
        TAP                              ;F091: 06             '.'
        TPA                              ;F092: 07             '.'
        FCB     $15                      ;F093: 15             '.'
        FCB     $00                      ;F094: 00             '.'
        TAB                              ;F095: 16             '.'
        SUBA    #$17                     ;F096: 80 17          '..'
        CMPA    #$96                     ;F098: 81 96          '..'
        EORA    M008A                    ;F09A: 98 8A          '..'
        BRA     ZF055                    ;F09C: 20 B7          ' .'
        BVC     ZF0A0                    ;F09E: 28 00          '(.'
ZF0A0   CLRA                             ;F0A0: 4F             'O'
        LDAB    #$80                     ;F0A1: C6 80          '..'
ZF0A3   ABA                              ;F0A3: 1B             '.'
        STAA    VOL_COMP_LATCH                    ;F0A4: B7 30 00       '.0.'
        BRN     ZF0A9                    ;F0A7: 21 00          '!.'
ZF0A9   BRN     ZF0AB                    ;F0A9: 21 00          '!.'
ZF0AB   BRN     ZF0AD                    ;F0AB: 21 00          '!.'
ZF0AD   TST     LATCH_IC7                    ;F0AD: 7D 18 00       '}..'
        BPL     ZF0B3                    ;F0B0: 2A 01          '*.'
        SBA                              ;F0B2: 10             '.'
ZF0B3   LSRB                             ;F0B3: 54             'T'
        BCC     ZF0A3                    ;F0B4: 24 ED          '$.'
        TAB                              ;F0B6: 16             '.'
        EORB    #$80                     ;F0B7: C8 80          '..'
        STAB    VOL_COMP_LATCH                    ;F0B9: F7 30 00       '.0.'
        LDAB    IC5_LATCH_STATE                    ;F0BC: D6 98          '..'
        ANDB    #$10                     ;F0BE: C4 10          '..'
        BEQ     ZF0C4                    ;F0C0: 27 02          ''.'
        LDAB    #$01                     ;F0C2: C6 01          '..'
ZF0C4   LDX     #M00DA                   ;F0C4: CE 00 DA       '...'
        ABX                              ;F0C7: 3A             ':'
        LSRA                             ;F0C8: 44             'D'
        BEQ     ZF0CF                    ;F0C9: 27 04          ''.'
        CMPA    #$7F                     ;F0CB: 81 7F          '..'
        BNE     ZF0D5                    ;F0CD: 26 06          '&.'
ZF0CF   CMPA    ,X                       ;F0CF: A1 00          '..'
        BNE     ZF0E3                    ;F0D1: 26 10          '&.'
        BRA     ZF0F2                    ;F0D3: 20 1D          ' .'
ZF0D5   TAB                              ;F0D5: 16             '.'
        DECA                             ;F0D6: 4A             'J'
        SUBB    ,X                       ;F0D7: E0 00          '..'
        BPL     ZF0DF                    ;F0D9: 2A 04          '*.'
        INCA                             ;F0DB: 4C             'L'
        INCA                             ;F0DC: 4C             'L'
        COMB                             ;F0DD: 53             'S'
        INCB                             ;F0DE: 5C             '\'
ZF0DF   CMPB    #$02                     ;F0DF: C1 02          '..'
        BCS     ZF0F2                    ;F0E1: 25 0F          '%.'
ZF0E3   STAA    ,X                       ;F0E3: A7 00          '..'
        LDAB    M00D1                    ;F0E5: D6 D1          '..'
        BEQ     ZF0F2                    ;F0E7: 27 09          ''.'
        LDAB    $02,X                    ;F0E9: E6 02          '..'
        STAB    M00DE                    ;F0EB: D7 DE          '..'
        LDAB    #$07                     ;F0ED: C6 07          '..'
        JSR     ZE74B                    ;F0EF: BD E7 4B       '..K'
ZF0F2   LDAA    #$10                     ;F0F2: 86 10          '..'
        LDAB    M00D1                    ;F0F4: D6 D1          '..'
        CMPB    #$60                     ;F0F6: C1 60          '.`'
        BEQ     ZF115                    ;F0F8: 27 1B          ''.'
        ANDB    #$20                     ;F0FA: C4 20          '. '
        BNE     ZF105                    ;F0FC: 26 07          '&.'
        COMA                             ;F0FE: 43             'C'
        ANDA    IC5_LATCH_STATE                    ;F0FF: 94 98          '..'
        LDAB    M00DA                    ;F101: D6 DA          '..'
        BRA     ZF109                    ;F103: 20 04          ' .'
ZF105   ORAA    IC5_LATCH_STATE                    ;F105: 9A 98          '..'
        LDAB    M00DB                    ;F107: D6 DB          '..'
ZF109   STAA    IC5_LATCH_STATE                    ;F109: 97 98          '..'
        STAA    IC5_LATCH                    ;F10B: B7 28 00       '.(.'
        ASLB                             ;F10E: 58             'X'
        EORB    #$80                     ;F10F: C8 80          '..'
        STAB    VOL_COMP_LATCH                    ;F111: F7 30 00       '.0.'
        RTS                              ;F114: 39             '9'

ZF115   EORA    IC5_LATCH_STATE                    ;F115: 98 98          '..'
        LDAB    M00DA                    ;F117: D6 DA          '..'
        BITA    #$10                     ;F119: 85 10          '..'
        BEQ     ZF109                    ;F11B: 27 EC          ''.'
        LDAB    M00DB                    ;F11D: D6 DB          '..'
        BRA     ZF109                    ;F11F: 20 E8          ' .'
ZF121   JSR     ZF23D                    ;F121: BD F2 3D       '..='
        CLR     >SER_STATUS                   ;F124: 7F 00 11       '...'
        LDAA    #$0C                     ;F127: 86 0C          '..'
        STAA    M0008                    ;F129: 97 08          '..'
        CLI                              ;F12B: 0E             '.'
        LDAA    #$F0                     ;F12C: 86 F0          '..'
        STAA    MIDI_SEND_B1                    ;F12E: 97 EB          '..'
        LDAA    #$00                     ;F130: 86 00          '..'
        STAA    M00EC                    ;F132: 97 EC          '..'
        LDAA    #$01                     ;F134: 86 01          '..'
        STAA    M00ED                    ;F136: 97 ED          '..'
        CLRB                             ;F138: 5F             '_'
        JSR     ZF247                    ;F139: BD F2 47       '..G'
        LDAA    #$F0                     ;F13C: 86 F0          '..'
        STAA    MIDI_SEND_B1                    ;F13E: 97 EB          '..'
        LDAA    #$02                     ;F140: 86 02          '..'
        STAA    M00EC                    ;F142: 97 EC          '..'
        LDAA    #$00                     ;F144: 86 00          '..'
        STAA    M00ED                    ;F146: 97 ED          '..'
        CLRB                             ;F148: 5F             '_'
        JSR     ZF247                    ;F149: BD F2 47       '..G'
        LDAB    #$06                     ;F14C: C6 06          '..'
        STAB    IC5_LATCH                    ;F14E: F7 28 00       '.(.'
        CLRA                             ;F151: 4F             'O'
        STAA    M00C2                    ;F152: 97 C2          '..'
        STAA    SWITCHES_STATE_2                    ;F154: 97 B6          '..'
        STAA    M00C5                    ;F156: 97 C5          '..'
        STAA    M00F1                    ;F158: 97 F1          '..'
ZF15A   BSR     ZF15E                    ;F15A: 8D 02          '..'
        BRA     ZF15A                    ;F15C: 20 FC          ' .'
ZF15E   SEI                              ;F15E: 0F             '.'
        LDAA    M00F1                    ;F15F: 96 F1          '..'
        BEQ     ZF182                    ;F161: 27 1F          ''.'
        LDAA    M00A0                    ;F163: 96 A0          '..'
        BEQ     ZF17A                    ;F165: 27 13          ''.'
        CMPA    #$0A                     ;F167: 81 0A          '..'
        BEQ     ZF172                    ;F169: 27 07          ''.'
        CMPA    #$1E                     ;F16B: 81 1E          '..'
        BCS     ZF182                    ;F16D: 25 13          '%.'
        CLRA                             ;F16F: 4F             'O'
        BRA     ZF17A                    ;F170: 20 08          ' .'
ZF172   INCA                             ;F172: 4C             'L'
        STAA    M00A0                    ;F173: 97 A0          '..'
        JSR     ZF1D6                    ;F175: BD F1 D6       '...'
        BRA     ZF182                    ;F178: 20 08          ' .'
ZF17A   INCA                             ;F17A: 4C             'L'
        STAA    M00A0                    ;F17B: 97 A0          '..'
        LDAA    #$CF                     ;F17D: 86 CF          '..'
        JSR     ZF1C9                    ;F17F: BD F1 C9       '...'
ZF182   CLI                              ;F182: 0E             '.'
        LDAA    SWITCHES_STATE_2                    ;F183: 96 B6          '..'
        ANDA    #$03                     ;F185: 84 03          '..'
        LDAB    M00C2                    ;F187: D6 C2          '..'
        STAA    M00C2                    ;F189: 97 C2          '..'
        EORB    M00C2                    ;F18B: D8 C2          '..'
        BEQ     ZF1B6                    ;F18D: 27 27          ''''
        ANDB    M00C2                    ;F18F: D4 C2          '..'
        BEQ     ZF1B6                    ;F191: 27 23          ''#'
        TBA                              ;F193: 17             '.'
        EORB    M00C5                    ;F194: D8 C5          '..'
        STAB    M00C5                    ;F196: D7 C5          '..'
        ANDA    M00C5                    ;F198: 94 C5          '..'
        BEQ     ZF1BF                    ;F19A: 27 23          ''#'
        BITA    #$02                     ;F19C: 85 02          '..'
        BEQ     ZF1AB                    ;F19E: 27 0B          ''.'
        CLR     >M00F1                   ;F1A0: 7F 00 F1       '...'
        STAA    M00C5                    ;F1A3: 97 C5          '..'
        LDAA    #$FE                     ;F1A5: 86 FE          '..'
        BSR     ZF1C9                    ;F1A7: 8D 20          '. '
        BRA     ZF1B6                    ;F1A9: 20 0B          ' .'
ZF1AB   BITA    #$01                     ;F1AB: 85 01          '..'
        BEQ     ZF1B6                    ;F1AD: 27 07          ''.'
        STAA    M00C5                    ;F1AF: 97 C5          '..'
        STAA    M00F1                    ;F1B1: 97 F1          '..'
        CLR     >M00A0                   ;F1B3: 7F 00 A0       '...'
ZF1B6   LDAB    M00BA                    ;F1B6: D6 BA          '..'
        ANDB    #$F0                     ;F1B8: C4 F0          '..'
        ORAB    M00C5                    ;F1BA: DA C5          '..'
        STAB    M00BA                    ;F1BC: D7 BA          '..'
        RTS                              ;F1BE: 39             '9'

ZF1BF   LDAA    M00C5                    ;F1BF: 96 C5          '..'
        BNE     ZF1B6                    ;F1C1: 26 F3          '&.'
        STAA    M00F1                    ;F1C3: 97 F1          '..'
        BSR     ZF1D6                    ;F1C5: 8D 0F          '..'
        BRA     ZF1B6                    ;F1C7: 20 ED          ' .'
ZF1C9   STAA    M00ED                    ;F1C9: 97 ED          '..'
        LDAA    #$80                     ;F1CB: 86 80          '..'
        STAA    MIDI_SEND_B1                    ;F1CD: 97 EB          '..'
        CLR     >M00EC                   ;F1CF: 7F 00 EC       '...'
        CLRB                             ;F1D2: 5F             '_'
        JMP     ZF247                    ;F1D3: 7E F2 47       '~.G'
ZF1D6   LDAA    #$00                     ;F1D6: 86 00          '..'
        STAA    MIDI_SEND_B1                    ;F1D8: 97 EB          '..'
        LDAB    #$01                     ;F1DA: C6 01          '..'
        JMP     ZF247                    ;F1DC: 7E F2 47       '~.G'

        ; Test mode?
ZF1DF   LDAA    #$01                     ;F1DF: 86 01          '..'
        STAA    M097F                    ;F1E1: B7 09 7F       '...'
        LDD     LEDS_STATE_PTR                    ;F1E4: DC B8          '..'
        ORAA    #$0F                     ;F1E6: 8A 0F          '..'
        ORAB    #$0F                     ;F1E8: CA 0F          '..'
        STD     LEDS_STATE_PTR                    ;F1EA: DD B8          '..'
        LDAA    M00BA                    ;F1EC: 96 BA          '..'
        ORAA    #$0F                     ;F1EE: 8A 0F          '..'
        STAA    M00BA                    ;F1F0: 97 BA          '..'
        CLR     >SER_STATUS                   ;F1F2: 7F 00 11       '...'
        LDAB    #$08                     ;F1F5: C6 08          '..'
        STAB    M0008                    ;F1F7: D7 08          '..'
        CLI                              ;F1F9: 0E             '.'
ZF1FA   LDX     #M0800                   ;F1FA: CE 08 00       '...'
        CLRB                             ;F1FD: 5F             '_'
ZF1FE   STAB    ,X                       ;F1FE: E7 00          '..'
        INX                              ;F200: 08             '.'
        INCB                             ;F201: 5C             '\'
        BNE     ZF1FE                    ;F202: 26 FA          '&.'
        LDX     #M0800                   ;F204: CE 08 00       '...'
ZF207   CMPB    ,X                       ;F207: E1 00          '..'
        BNE     ZF235                    ;F209: 26 2A          '&*'
        INX                              ;F20B: 08             '.'
        INCB                             ;F20C: 5C             '\'
        BNE     ZF207                    ;F20D: 26 F8          '&.'
        LDX     #M0800                   ;F20F: CE 08 00       '...'
        STX     MIDI_SEND_B1                    ;F212: DF EB          '..'
        LDAA    MIDI_SEND_B1                    ;F214: 96 EB          '..'
ZF216   STAA    ,X                       ;F216: A7 00          '..'
        INCA                             ;F218: 4C             'L'
        CMPA    #$10                     ;F219: 81 10          '..'
        BEQ     ZF223                    ;F21B: 27 06          ''.'
        STAA    MIDI_SEND_B1                    ;F21D: 97 EB          '..'
        LDX     MIDI_SEND_B1                    ;F21F: DE EB          '..'
        BRA     ZF216                    ;F221: 20 F3          ' .'
ZF223   DECA                             ;F223: 4A             'J'
ZF224   CMPA    ,X                       ;F224: A1 00          '..'
        BNE     ZF235                    ;F226: 26 0D          '&.'
        DECA                             ;F228: 4A             'J'
        CMPA    #$08                     ;F229: 81 08          '..'
        BCS     ZF233                    ;F22B: 25 06          '%.'
        STAA    MIDI_SEND_B1                    ;F22D: 97 EB          '..'
        LDX     MIDI_SEND_B1                    ;F22F: DE EB          '..'
        BRA     ZF224                    ;F231: 20 F1          ' .'
ZF233   BRA     ZF1FA                    ;F233: 20 C5          ' .'
ZF235   LDAA    LEDS_STATE_PTR                    ;F235: 96 B8          '..'
        ANDA    #$F0                     ;F237: 84 F0          '..'
        STAA    LEDS_STATE_PTR                    ;F239: 97 B8          '..'
        BRA     ZF1FA                    ;F23B: 20 BD          ' .'
ZF23D   LDAA    #$40                     ;F23D: 86 40          '.@'
        STAA    MIDI_SEND_B1                    ;F23F: 97 EB          '..'
        LDAB    #$80                     ;F241: C6 80          '..'
        JSR     ZF247                    ;F243: BD F2 47       '..G'
        RTS                              ;F246: 39             '9'

ZF247   LDAA    P2DR                     ;F247: 96 03          '..'
        ANDA    #$02                     ;F249: 84 02          '..'
        BNE     ZF247                    ;F24B: 26 FA          '&.'
ZF24D   LDAA    P1DR                     ;F24D: 96 02          '..'
        COMA                             ;F24F: 43             'C'
        BNE     ZF24D                    ;F250: 26 FB          '&.'
        OIM     #$01,P2DR                ;F252: 72 01 03       'r..'
        LDAA    MIDI_SEND_B1                    ;F255: 96 EB          '..'
        STAA    P1DR                     ;F257: 97 02          '..'
        LDAA    #$FF                     ;F259: 86 FF          '..'
        STAA    M0000                    ;F25B: 97 00          '..'
        AIM     #$FE,P2DR                ;F25D: 71 FE 03       'q..'
        TSTB                             ;F260: 5D             ']'
        BNE     ZF27D                    ;F261: 26 1A          '&.'
ZF263   LDAA    P2DR                     ;F263: 96 03          '..'
        ANDA    #$02                     ;F265: 84 02          '..'
        BEQ     ZF263                    ;F267: 27 FA          ''.'
        LDAA    M00EC                    ;F269: 96 EC          '..'
        STAA    P1DR                     ;F26B: 97 02          '..'
        OIM     #$01,P2DR                ;F26D: 72 01 03       'r..'
ZF270   LDAA    P2DR                     ;F270: 96 03          '..'
        ANDA    #$02                     ;F272: 84 02          '..'
        BNE     ZF270                    ;F274: 26 FA          '&.'
        LDAA    M00ED                    ;F276: 96 ED          '..'
        STAA    P1DR                     ;F278: 97 02          '..'
        AIM     #$FE,P2DR                ;F27A: 71 FE 03       'q..'
ZF27D   LDAA    P2DR                     ;F27D: 96 03          '..'
        ANDA    #$02                     ;F27F: 84 02          '..'
        BEQ     ZF27D                    ;F281: 27 FA          ''.'
        CLRA                             ;F283: 4F             'O'
        STAA    M0000                    ;F284: 97 00          '..'
        TSTB                             ;F286: 5D             ']'
        BPL     ZF297                    ;F287: 2A 0E          '*.'
        OIM     #$01,P2DR                ;F289: 72 01 03       'r..'
ZF28C   LDAA    P2DR                     ;F28C: 96 03          '..'
        ANDA    #$02                     ;F28E: 84 02          '..'
        BNE     ZF28C                    ;F290: 26 FA          '&.'
        LDAA    P1DR                     ;F292: 96 02          '..'
        AIM     #$FE,P2DR                ;F294: 71 FE 03       'q..'
ZF297   RTS                              ;F297: 39             '9'

        ; TRAP
        CMPB    $2D,X                    ;FFEE: E1 2D          '.-'
svec_DIV0 FDB     hdlr_DIV0                ;FFF0: E7 93          '..'
svec_SWI3 FDB     hdlr_SWI3                ;FFF2: E8 93          '..'
svec_SWI2 FDB     hdlr_SWI2                ;FFF4: E9 00          '..'
svec_FIRQ FDB     hdlr_RST                 ;FFF6: E1 2D          '.-'
svec_IRQ FDB     hdlr_IRQ                 ;FFF8: E8 EA          '..'
svec_SWI FDB     hdlr_RST                 ;FFFA: E1 2D          '.-'
svec_NMI FDB     hdlr_RST                 ;FFFC: E1 2D          '.-'
svec_RST FDB     hdlr_RST                 ;FFFE: E1 2D          '.-'

        END
